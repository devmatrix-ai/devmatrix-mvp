ğŸ“ Logging to: /home/kwar/code/agentic-ai/logs/runs/test_devmatrix_000_051.log
======================================================================
ğŸš€ DevMatrix E2E Pipeline
======================================================================
ğŸ“„ Spec: tests/e2e/test_specs/ecommerce-api-spec-human.md
ğŸ”§ PRODUCTION_MODE: true
ğŸ§ª LLM Smoke Tests: disabled
â±ï¸  Timeout: 9000s
======================================================================

ğŸ§¹ Cleared caches: /home/kwar/code/agentic-ai/.devmatrix/ir_cache, /home/kwar/code/agentic-ai/.cache
ğŸ—„ï¸ Neo4j IR persistence enabled
ğŸšï¸ Stratified Architecture: HYBRID mode
   ğŸ“‹ Manifest tracking enabled
   ğŸ“Š Stratum metrics collection enabled
   ğŸš¦ Quality gate: DEV
   ğŸ† Golden apps validation: enabled
   ğŸ¦´ Skeleton generator: enabled
   ğŸ“ˆ Pattern promotion: enabled
   âœ… Basic validation pipeline ready

======================================================================
ğŸš€ REAL E2E TEST: Full Pipeline Execution
======================================================================
ğŸ“„ Spec: tests/e2e/test_specs/ecommerce-api-spec-human.md
ğŸ“ Output: tests/e2e/generated_apps/ecommerce-api-spec-human_1764467618
======================================================================

ğŸ³ Docker check: OK


============================================================
ğŸš€ E2E Pipeline: ecommerce-api-spec-human
============================================================

ğŸ“Š Progress tracking enabled (fallback mode)


  ğŸ”„ Loading PatternBank... âœ“
  ğŸ”„ Connecting to Qdrant... âœ“
  ğŸ”„ Loading PatternClassifier... âœ“
  ğŸ”„ Loading MultiPassPlanner... âœ“
  ğŸ”„ Loading RequirementsClassifier... âœ“
  ğŸ”„ Loading ComplianceValidator... âœ“
  ğŸ”„ Loading TestResultAdapter... âœ“
  ğŸ”„ Loading ErrorPatternStore... âœ“
  ğŸ”„ Loading CodeGenerationService... âœ“

ğŸ”§ Service Initialization
  âœ“ PatternBank                         âœ“ Qdrant                              âœ“ PatternClassifier                   âœ“ MultiPassPlanner                 
  âœ“ RequirementsClassifier              âœ“ ComplianceValidator                 âœ“ TestResultAdapter                   âœ“ ErrorPatternStore                
  âœ“ CodeGenerationService               âœ“ PatternFeedbackIntegration       
â–¶ï¸  Phase: Spec Ingestion

ğŸ“‹ Phase 1: Spec Ingestion (Enhanced with SpecParser)
    - ğŸ“ Spec translated to English (structure preserved)
  âœ“ Checkpoint: CP-1.1: Spec loaded from file (1/4)
    - Extracting ApplicationIR (cache: Neo4j+Redis)...
Redis connection established {'host': 'localhost', 'port': 6379, 'db': 0}
    - ApplicationIR: 6 entities, 33 endpoints, 17 flows, 95 validations
    - ğŸ—„ï¸ ApplicationIR persisted to Neo4j graph
  âœ“ Checkpoint: CP-1.2: Requirements extracted (2/4)
    - Functional requirements: 56 (source: ApplicationIR)
    - Entities: 6
    - Endpoints: 33
    - Business logic/flows: 19
    - ğŸ“ Spec complexity: 0.00 (est. 5000ms)
  âœ“ Checkpoint: CP-1.3: Context loaded (3/4)
  âœ“ Checkpoint: CP-1.4: Complexity assessed (4/4)
âœ… Phase Completed: spec_ingestion (42452ms)
  âœ… Contract validation: PASSED
âœ… Phase Complete: Spec Ingestion
â–¶ï¸  Phase: Validation Scaling

âœ¨ Phase 1.5: Validation Scaling (Pattern + LLM + Graph)
    - Using OPTION 1: LLM NORMALIZATION (Selected)
    - Normalizing with LLM...
    - ğŸ“Š LLM tokens tracked: 3319 in + 2841 out = 6160 total
    - âœ… LLM normalization succeeded (6 entities)
    - Extracting validations from spec (6 entities)...
    - âœ… Extraction complete
    - Total validations extracted: 106
      â€¢ format: 28
      â€¢ presence: 42
      â€¢ range: 7
      â€¢ relationship: 10
      â€¢ stock_constraint: 4
      â€¢ uniqueness: 13
      â€¢ workflow_constraint: 2
    - Coverage: 106/106 (100.0%)
    - Average confidence: 0.85
  âœ… Contract validation: PASSED
âœ… Phase Complete: Validation Scaling
â–¶ï¸  Phase: Requirements Analysis

================================================================================
ğŸ” Phase 2: Requirements Analysis
================================================================================
ğŸ“‹ Semantic Classification (RequirementsClassifier)
ğŸ“ Classifying requirements semantically...
âœ“ Classification completed
    â”œâ”€ Total requirements: 17
    â”œâ”€ Functional: 17
    â”œâ”€ Non-functional: 0
    â”œâ”€ Dependency graph nodes: 3
    â”œâ”€ Valid DAG: True
ğŸ“¦ Domain Distribution
    â”œâ”€ crud: 13
    â”œâ”€ payment: 2
    â”œâ”€ workflow: 2
ğŸ“‹ Ground Truth Validation
ğŸ“ Validating against ground truth...
â„¹ï¸ Loaded ground truth
    â”œâ”€ Requirements: 19
ğŸ“Š Classification Metrics
    â”œâ”€ Accuracy: 47.1%
    â”œâ”€ Precision: 85.0%
  âœ“ Checkpoint: CP-2.1: Functional requirements (1/5)
  âœ“ Checkpoint: CP-2.2: Non-functional requirements (2/5)
  âœ“ Checkpoint: CP-2.3: Dependencies identified (3/5)
  âœ“ Checkpoint: CP-2.4: Constraints extracted (4/5)
ğŸ“‹ Pattern Matching & Analysis
ğŸ“ Searching for similar patterns (real)...
    âœ“ Found 10 matching patterns
âœ“ Pattern matching completed
    â”œâ”€ Patterns found: 10
  âœ“ Checkpoint: CP-2.5: Patterns matched (5/5)
ğŸ“‹ Validation Checkpoints
âœ“ Checkpoint CP-2.1: Functional requirements classification
âœ“ Checkpoint CP-2.2: Non-functional requirements extraction
âœ“ Checkpoint CP-2.3: Dependency identification
âœ“ Checkpoint CP-2.4: Constraint extraction
âœ“ Checkpoint CP-2.5: Pattern matching validation
âœ… Phase Completed: requirements_analysis (554ms)
ğŸ“Š Phase Metrics
    â”œâ”€ Classification Accuracy: 47.1%
    â”œâ”€ Pattern Precision: 80.0%
    â”œâ”€ Pattern Recall: 47.1%
    â”œâ”€ Pattern F1-Score: 59.3%
    â”œâ”€ Contract Validation: PASSED
âœ… Phase Complete: Requirements Analysis
â–¶ï¸  Phase: Multi-Pass Planning

ğŸ“ Phase 3: Multi-Pass Planning
  ğŸ“ DAG nodes from IR: 56 (entities: 6, endpoints: 33, flows: 17)
  âœ“ Checkpoint: CP-3.1: Initial DAG created (1/5)
  âœ“ Checkpoint: CP-3.2: Dependencies refined (2/5)
  âœ“ Checkpoint: CP-3.3: Resources optimized (3/5)
  âœ“ Checkpoint: CP-3.4: Cycles repaired (4/5)
  âœ“ Checkpoint: CP-3.5: DAG validated (5/5)
  ğŸ“‹ Using DAG ground truth: 23 nodes, 30 edges expected
âœ… Phase Completed: multi_pass_planning (103ms)
  ğŸ“Š DAG Accuracy: 64.2%
  âœ… Contract validation: PASSED
  ğŸ” Execution Order Validation: 100.0% (violations: 0)
âœ… Phase Complete: Multi-Pass Planning
â–¶ï¸  Phase: Atomization

âš›ï¸ Phase 4: Atomization
  âœ“ Checkpoint: CP-4.1: Step 1 (1/5)
  âœ“ Checkpoint: CP-4.2: Step 2 (2/5)
  âœ“ Checkpoint: CP-4.3: Step 3 (3/5)
  âœ“ Checkpoint: CP-4.4: Step 4 (4/5)
  âœ“ Checkpoint: CP-4.5: Atomization complete (5/5)
âœ… Phase Completed: atomization (1302ms)
  ğŸ“Š Atomization Quality: 100.0%
  âœ… Contract validation: PASSED
âœ… Phase Complete: Atomization
â–¶ï¸  Phase: DAG Construction

ğŸ”— Phase 5: DAG Construction
  âœ“ Checkpoint: CP-5.1: Step 1 (1/5)
  âœ“ Checkpoint: CP-5.2: Step 2 (2/5)
  âœ“ Checkpoint: CP-5.3: Step 3 (3/5)
  âœ“ Checkpoint: CP-5.4: Step 4 (4/5)
  âœ“ Checkpoint: CP-5.5: Step 5 (5/5)
âœ… Phase Completed: dag_construction (1603ms)
  âœ… Contract validation: PASSED
âœ… Phase Complete: DAG Construction
â–¶ï¸  Phase: Code Generation

================================================================================
ğŸ” Phase 6: Code Generation
================================================================================
  âœ“ Checkpoint: CP-6.1: Code generation started (1/5)
ğŸ—ï¸ Code Generation Initialization
âœ“ Checkpoint CP-6.1: Code generation started
    (Using IR-centric code generation: DomainModelIR, APIModelIR, ValidationModelIR, InfrastructureModelIR)
ğŸ“ Generating code from requirements...
â„¹ï¸ Dependency waves prepared
    â”œâ”€ Wave count: 2
    â”œâ”€ Validation phase: Phase 7
ğŸ”§ Code Composition
  ğŸ“ Composing production-ready application... â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 100%
  ğŸ“¦ Parsed production mode output: 96 files
ğŸ“š Pattern Retrieval from PatternBank
ğŸ“¦ Categories Retrieved
    â”œâ”€ Core Config: 1
    â”œâ”€ Database (Async): 1
    â”œâ”€ Observability: 5
    â”œâ”€ Models (Pydantic): 1
    â”œâ”€ Models (SQLAlchemy): 1
    â”œâ”€ Repository Pattern: 1
    â”œâ”€ Business Logic: 1
    â”œâ”€ API Routes: 1
    â”œâ”€ Security Hardening: 1
    â”œâ”€ Test Infrastructure: 7
    â”œâ”€ Docker Infrastructure: 4
    â”œâ”€ Project Config: 3
âœ“ Total patterns retrieved: 27
    â”œâ”€ Categories: 12
    â”œâ”€ Status: Ready for composition

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    ğŸ“¦ Code Generation Components
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Component                              |     Patterns     |     Files Generated     | Status
  --------------------------------------------------------------------------------------------------------------
    Core                                     |         4        |           4           |   âœ…
    Models                                   |         3        |           3           |   âœ…
    Services                                 |         7        |           7           |   âœ…
    API Routes                               |        10        |          10           |   âœ…
    Middleware                               |         1        |           1           |   âœ…
    Migrations                               |         4        |           4           |   âœ…
    Tests                                    |         6        |           6           |   âœ…
    Other                                    |        61        |          61           |   âœ…
  --------------------------------------------------------------------------------------------------------------
    â±ï¸  1416ms                               |        ğŸ“¦ 261.8KB       |          ğŸ“Š 96          |  âœ… 100%
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âœ“ Code generation completed
    â”œâ”€ Total files: 96
    â”œâ”€ Duration: 1.4s
  âœ“ Checkpoint: CP-6.2: Models generated (2/5)
  âœ“ Checkpoint: CP-6.3: Routes generated (3/5)
âœ“ Checkpoint CP-6.2: Pattern retrieval completed
âœ“ Checkpoint CP-6.3: Code composition started
  âœ“ Checkpoint: CP-6.4: Tests generated (4/5)
âœ“ Checkpoint CP-6.4: File generation completed
  âœ“ Checkpoint: CP-6.5: Code generation complete (5/5)
âœ“ Checkpoint CP-6.5: Production mode validation
âœ… Phase Completed: wave_execution (1517ms)
ğŸ“Š Generation Metrics
    â”œâ”€ Execution Success Rate: 100.0%
    â”œâ”€ Recovery Rate: 0.0%
    â”œâ”€ Contract Validation: PASSED

  ğŸ§ª Phase 6.5: IR-based Test Generation
    âœ… Generated 267 tests across 3 files:
       - validation: test_validation_generated.py (183 tests)
       - integration: test_integration_generated.py (35 tests)
       - contract: test_contract_generated.py (49 tests)

  ğŸ”§ Phase 6.6: IR-based Service Generation
    âœ… Generated 4 service files:
       - Product_flows: product_flow_methods.py
       - Customer_flows: customer_flow_methods.py
       - Cart_flows: cart_flow_methods.py
       - Order_flows: order_flow_methods.py
    ğŸ“Š Flow coverage: 100.0% (17/17)
âœ… Phase Complete: Code Generation
â–¶ï¸  Phase: Deployment

ğŸ“¦ Phase 8: Deployment

  ğŸ” Running basic validation pipeline...
  âœ… PASSED | Files: 96 | Errors: 0 | Warnings: 3 | Time: 186ms

  ğŸ“‹ Generation manifest saved: tests/e2e/generated_apps/ecommerce-api-spec-human_1764467618/generation_manifest.json
ğŸ“Š Stratum Distribution:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Stratum   â”‚ Files â”‚ Pct    â”‚ Time (ms) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TEMPLATE  â”‚    31 â”‚  32.3% â”‚         0 â”‚
â”‚ AST       â”‚    59 â”‚  61.5% â”‚         0 â”‚
â”‚ LLM       â”‚     6 â”‚   6.2% â”‚         0 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TOTAL     â”‚    96 â”‚ 100.0% â”‚         0 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“Š Stratum Performance:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Stratum  â”‚ Files   â”‚ Time    â”‚ Detected â”‚ Repaired â”‚ LLM Tokens â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TEMPLATE â”‚    31 â”‚      4ms â”‚        0 â”‚        0 â”‚          0 â”‚
â”‚ AST      â”‚    59 â”‚      6ms â”‚        0 â”‚        0 â”‚          0 â”‚
â”‚ LLM      â”‚     6 â”‚      0ms â”‚        0 â”‚        0 â”‚      6,160 â”‚
â”‚ QA       â”‚     - â”‚    186ms â”‚        0 â”‚        0 â”‚          0 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TOTAL    â”‚    96 â”‚    196ms â”‚        0 â”‚        0 â”‚      6,160 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ… Overall Success Rate: 100.0%
ğŸšï¸ Execution Mode: HYBRID
  ğŸ“Š Stratum metrics saved: tests/e2e/generated_apps/ecommerce-api-spec-human_1764467618/stratum_metrics.json

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    ğŸ’¾ Deployment Complete
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Metric                                  |           Result            |     Status
  --------------------------------------------------------------------------------------------------------------
    Files Saved                             |               96        |       âœ…     
    Total Size                              |          261.8KB        |       âœ…     
    Deployment Time                         |             15ms        |       âœ…     
    Output Location                         |  .../_1764467618        |       âœ…     
  --------------------------------------------------------------------------------------------------------------
    âœ… All 96 files successfully deployed to disk                                                
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  âœ“ Checkpoint: CP-8.1: Files saved to disk (1/5)
  âœ“ Checkpoint: CP-8.2: Directory structure created (2/5)
  âœ“ Checkpoint: CP-8.3: README not generated (missing from code generation) (3/5)
  âœ“ Checkpoint: CP-8.4: Dependencies documented (4/5)
  âœ“ Checkpoint: CP-8.5: Generation manifest saved (5/5)
  âœ“ Checkpoint: CP-8.6: Stratum metrics saved (6/5)

  ğŸ† Running golden app comparison: ecommerce
No JSON found in LLM response
No JSON found in LLM response
Invalid validation type: BUSINESS_RULE, skipping rule
Invalid validation type: BUSINESS_RULE, skipping rule
Invalid validation type: BUSINESS_RULE, skipping rule
Golden App: ecommerce
Status: âœ… PASSED
Duration: 85945ms
  Metrics: âœ… Metrics: 100.0% match
  Regressions: âœ… Regressions: 100.0% match
  ğŸ† Golden app comparison saved: tests/e2e/generated_apps/ecommerce-api-spec-human_1764467618/golden_app_comparison.json
  âœ“ Checkpoint: CP-8.8: Golden app comparison (7/5)
  âœ“ Checkpoint: CP-8.9: Deployment complete (8/5)
âœ… Phase Completed: deployment (86250ms)
  âœ… Generated app saved to: tests/e2e/generated_apps/ecommerce-api-spec-human_1764467618
âœ… Phase Complete: Deployment
â–¶ï¸  Phase: Code Repair

ğŸ”§ Phase 6.5: Code Repair (Task Group 4)

  ğŸ” CP-6.5.1: Running compliance pre-check...
Successfully imported FastAPI app
Extracted 6 entities from OpenAPI schemas: ['Cart', 'CartItem', 'Customer', 'Order', 'OrderItem', 'Product']
After checking entities.py: 6 entities found: ['Cart', 'CartItem', 'Customer', 'Order', 'OrderItem', 'Product']
Extracted 34 endpoints from OpenAPI paths
Extracted 62 validations from OpenAPI schemas
After checking schemas.py with AST: 169 validations found
âœ… Extracted 34 SQLAlchemy constraints using AST parser
ğŸ§  Using SemanticMatcher for ML-based constraint matching
ğŸš€ Using IRSemanticMatcher for fast batch matching
Declarative base created
ğŸ§  IR matching: 308/310 = 99.4%
ğŸ“Š IRSemanticMatcher: 308/310 = 99.4%
âš ï¸ Semantic matching: 308/310 = 99.4%
   Unmatched: ['Order.items: custom', 'Order.items: stock_constraint']
ğŸ“Š SemanticMatcher: 308/310 validations matched = 99.4%
OpenAPI-based compliance validation complete: 99.9% (entities: 100.0%, endpoints: 100.0%, validations: 99.4%)
  âœ“ Pre-check complete: 99.9% compliance
    - Entities: 6/6
    - Endpoints: 34/33

  ğŸ¤– CP-6.5.2: Initializing repair dependencies...
  âœ“ Dependencies initialized

  ğŸ”„ CP-6.5.3: Converting ComplianceReport to TestResult format...
Converting ComplianceReport with 99.9% compliance
Converted 274 compliance failures to TestResult format
  âœ“ Test results adapted: 274 failures converted

  ğŸ” CP-6.5.4: Executing repair loop...
ğŸ“‹ Repair Iterations
ğŸ“ Starting repair loop (max 3 iterations)...
â³ Iteration 1/3
ğŸ“ Analyzing 274 failures...
ğŸ“ Applying repairs...
        ğŸ“ CodeRepairAgent initialized with ApplicationIR
CodeRepair: Using IR-centric mode (ApplicationIR)
CodeRepair (IR): 0 missing entities, 0 missing endpoints
CodeRepair (IR): 274 missing validations/constraints
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: format=uuid handled natively by Pydantic, skipping
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: Skipping format=none (no format specified)
Bug #51: Skipping min_length=none (invalid numeric value)
Added max_length=2000 to Product.description
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: Skipping format=none (no format specified)
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=0.01'
Added ge=0.01 to Product.price
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: Skipping format=none (no format specified)
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=0'
Added ge=0 to Product.stock
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: Skipping format=none (no format specified)
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: Skipping format=none (no format specified)
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: format=uuid handled natively by Pydantic, skipping
Added min_length=3 to Customer.email
Added max_length=255 to Customer.email
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Added pattern=^[a-za-z0-9._%+-]+@[a-za-z0-9.-]+\.[a-za-z]{2,}$ to Customer.email
Task 2.5: Skipping enum_values=none (no values)
Task 2: Mapping format=email â†’ pattern
Added pattern=^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$ to Customer.email
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: Skipping format=none (no format specified)
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: format=datetime handled natively by Pydantic, skipping
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: format=uuid handled natively by Pydantic, skipping
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: format=uuid handled natively by Pydantic, skipping
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2: Mapping enum_values â†’ enum=['open', 'checked_out']
Updated Cart.status to Literal['open', 'checked_out']
Task 2: Skipping format=none (no format specified)
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: format=uuid handled natively by Pydantic, skipping
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: format=uuid handled natively by Pydantic, skipping
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: format=uuid handled natively by Pydantic, skipping
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=1'
Added ge=1 to CartItem.quantity
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: Skipping format=none (no format specified)
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=0.01'
Added ge=0.01 to CartItem.unit_price
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: Skipping format=none (no format specified)
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: format=uuid handled natively by Pydantic, skipping
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: format=uuid handled natively by Pydantic, skipping
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2: Mapping enum_values â†’ enum=['pending_payment', 'paid', 'cancelled']
Updated Order.order_status to Literal['pending_payment', 'paid', 'cancelled']
Task 2: Skipping format=none (no format specified)
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2: Mapping enum_values â†’ enum=['pending', 'simulated_ok', 'failed']
Updated Order.payment_status to Literal['pending', 'simulated_ok', 'failed']
Task 2: Skipping format=none (no format specified)
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=0'
Added ge=0 to Order.total_amount
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: Skipping format=none (no format specified)
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: format=datetime handled natively by Pydantic, skipping
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: format=uuid handled natively by Pydantic, skipping
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: format=uuid handled natively by Pydantic, skipping
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: format=uuid handled natively by Pydantic, skipping
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=1'
Added ge=1 to OrderItem.quantity
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: Skipping format=none (no format specified)
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=0.01'
Added ge=0.01 to OrderItem.unit_price
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: Skipping format=none (no format specified)
Added gt=0 to Product.stock
Bug #45: Ignoring unrecognized constraint 'presence' from 'Product.name: presence'
Task 2: Unknown format=true, skipping
Bug #45: Ignoring unrecognized constraint 'uniqueness' from 'Customer.email: uniqueness'
Bug #45: Ignoring unrecognized constraint 'presence' from 'Customer.email: presence'
Bug #45: Ignoring unrecognized constraint 'presence' from 'Customer.full_name: presence'
Added gt=0 to Order.total_amount
Bug #45: Ignoring unrecognized constraint 'status_transition' from 'Cart.status: status_transition'
Bug #45: Ignoring unrecognized constraint 'status_transition' from 'Order.order_status: status_transition'
Bug #45: Ignoring unrecognized constraint 'custom' from 'Cart.customer_id: custom'
Bug #45: Ignoring unrecognized constraint 'custom' from 'CartItem.product_id: custom'
Bug #45: Ignoring unrecognized constraint 'stock_constraint' from 'CartItem.quantity: stock_constraint'
Bug #45: Ignoring unrecognized constraint 'custom' from 'Order.items: custom'
Bug #45: Ignoring unrecognized constraint 'stock_constraint' from 'Order.items: stock_constraint'
Bug #45: Ignoring unrecognized constraint 'workflow_constraint' from 'Order.order_status: workflow_constraint'
Bug #45: Ignoring unrecognized constraint 'custom' from 'Product.stock: custom'
Bug #45: Ignoring unrecognized constraint 'custom' from 'CartItem.unit_price: custom'
Bug #45: Ignoring unrecognized constraint 'custom' from 'OrderItem.unit_price: custom'
Bug #45: Ignoring unrecognized constraint 'custom' from 'Order.total_amount: custom'
Bug #45: Ignoring unrecognized constraint 'relationship' from 'Product.id: relationship'
Bug #45: Ignoring unrecognized constraint 'relationship' from 'Customer.id: relationship'
Bug #45: Ignoring unrecognized constraint 'relationship' from 'Cart.id: relationship'
Bug #45: Ignoring unrecognized constraint 'relationship' from 'Order.id: relationship'
Bug #45: Ignoring unrecognized constraint 'presence' from 'Product.id: presence'
Bug #45: Ignoring unrecognized constraint 'uniqueness' from 'Product.id: uniqueness'
Task 2: Unknown format=true, skipping
Task 2: Unknown format=true, skipping
Task 2: Unknown format=true, skipping
Bug #45: Ignoring unrecognized constraint 'presence' from 'Product.price: presence'
Bug #45: Ignoring unrecognized constraint 'presence' from 'Product.stock: presence'
Bug #45: Ignoring unrecognized constraint 'presence' from 'Product.is_active: presence'
Bug #45: Ignoring unrecognized constraint 'presence' from 'Customer.id: presence'
Bug #45: Ignoring unrecognized constraint 'uniqueness' from 'Customer.id: uniqueness'
Task 2: Unknown format=true, skipping
Task 2: Unknown format=true, skipping
Bug #45: Ignoring unrecognized constraint 'presence' from 'Customer.registration_date: presence'
Task 2: Unknown format=true, skipping
Bug #45: Ignoring unrecognized constraint 'presence' from 'Cart.id: presence'
Bug #45: Ignoring unrecognized constraint 'uniqueness' from 'Cart.id: uniqueness'
Task 2: Unknown format=true, skipping
Bug #45: Ignoring unrecognized constraint 'presence' from 'Cart.customer_id: presence'
Task 2: Unknown format=true, skipping
Bug #45: Ignoring unrecognized constraint 'presence' from 'Cart.status: presence'
Bug #45: Ignoring unrecognized constraint 'presence' from 'CartItem.id: presence'
Bug #45: Ignoring unrecognized constraint 'uniqueness' from 'CartItem.id: uniqueness'
Task 2: Unknown format=true, skipping
Bug #45: Ignoring unrecognized constraint 'presence' from 'CartItem.cart_id: presence'
Task 2: Unknown format=true, skipping
Bug #45: Ignoring unrecognized constraint 'presence' from 'CartItem.product_id: presence'
Task 2: Unknown format=true, skipping
Bug #45: Ignoring unrecognized constraint 'presence' from 'CartItem.quantity: presence'
Bug #45: Ignoring unrecognized constraint 'range' from 'CartItem.quantity: range'
Bug #45: Ignoring unrecognized constraint 'presence' from 'CartItem.unit_price: presence'
Bug #45: Ignoring unrecognized constraint 'presence' from 'Order.id: presence'
Bug #45: Ignoring unrecognized constraint 'uniqueness' from 'Order.id: uniqueness'
Task 2: Unknown format=true, skipping
Bug #45: Ignoring unrecognized constraint 'presence' from 'Order.customer_id: presence'
Task 2: Unknown format=true, skipping
Bug #45: Ignoring unrecognized constraint 'presence' from 'Order.order_status: presence'
Bug #45: Ignoring unrecognized constraint 'presence' from 'Order.payment_status: presence'
Bug #45: Ignoring unrecognized constraint 'status_transition' from 'Order.payment_status: status_transition'
Bug #45: Ignoring unrecognized constraint 'presence' from 'Order.total_amount: presence'
Bug #45: Ignoring unrecognized constraint 'presence' from 'Order.creation_date: presence'
Task 2: Unknown format=true, skipping
Bug #45: Ignoring unrecognized constraint 'presence' from 'OrderItem.id: presence'
Bug #45: Ignoring unrecognized constraint 'uniqueness' from 'OrderItem.id: uniqueness'
Task 2: Unknown format=true, skipping
Bug #45: Ignoring unrecognized constraint 'presence' from 'OrderItem.order_id: presence'
Task 2: Unknown format=true, skipping
Bug #45: Ignoring unrecognized constraint 'presence' from 'OrderItem.product_id: presence'
Task 2: Unknown format=true, skipping
Bug #45: Ignoring unrecognized constraint 'presence' from 'OrderItem.quantity: presence'
Bug #45: Ignoring unrecognized constraint 'range' from 'OrderItem.quantity: range'
Bug #45: Ignoring unrecognized constraint 'presence' from 'OrderItem.unit_price: presence'
âœ“ Applied 274 repairs
    â”œâ”€ Endpoints added: 0
    â”œâ”€ Validations added: 274
ğŸ“ Re-validating compliance...
Validating app at /home/kwar/code/agentic-ai/tests/e2e/generated_apps/ecommerce-api-spec-human_1764467618 using OpenAPI schema
Converting DATABASE_URL to async driver for validation
Successfully imported FastAPI app
Extracted 6 entities from OpenAPI schemas: ['Cart', 'CartItem', 'Customer', 'Order', 'OrderItem', 'Product']
After checking entities.py: 6 entities found: ['Cart', 'CartItem', 'Customer', 'Order', 'OrderItem', 'Product']
Extracted 34 endpoints from OpenAPI paths
Extracted 62 validations from OpenAPI schemas
After checking schemas.py with AST: 176 validations found
âœ… Extracted 34 SQLAlchemy constraints using AST parser
ğŸ§  Using SemanticMatcher for ML-based constraint matching
ğŸš€ Using IRSemanticMatcher for fast batch matching
Declarative base created
ğŸ§  IR matching: 308/310 = 99.4%
ğŸ“Š IRSemanticMatcher: 308/310 = 99.4%
âš ï¸ Semantic matching: 308/310 = 99.4%
   Unmatched: ['Order.items: custom', 'Order.items: stock_constraint']
ğŸ“Š SemanticMatcher: 308/310 validations matched = 99.4%
OpenAPI-based compliance validation complete: 99.9% (entities: 100.0%, endpoints: 100.0%, validations: 99.4%)
â„¹ï¸ Post-repair compliance: 99.9% â†’ 99.9%
    â”œâ”€ Status: âš ï¸
    â”œâ”€ Delta: +0.0%
    â”œâ”€ Validations: 308/310 â†’ 308/310
    â”œâ”€ Tests fixed: 274
â„¹ï¸ No improvement
    â”œâ”€ Status: =
    â”œâ”€ Message: Plateau reached
â³ Iteration 2/3
ğŸ“ Analyzing 274 failures...
ğŸ“ Applying repairs...
CodeRepair: Using IR-centric mode (ApplicationIR)
CodeRepair (IR): 0 missing entities, 0 missing endpoints
CodeRepair (IR): 274 missing validations/constraints
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: format=uuid handled natively by Pydantic, skipping
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: Skipping format=none (no format specified)
Bug #51: Skipping min_length=none (invalid numeric value)
Added max_length=2000 to Product.description
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: Skipping format=none (no format specified)
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=0.01'
Added ge=0.01 to Product.price
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: Skipping format=none (no format specified)
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=0'
Added ge=0 to Product.stock
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: Skipping format=none (no format specified)
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: Skipping format=none (no format specified)
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: format=uuid handled natively by Pydantic, skipping
Added min_length=3 to Customer.email
Added max_length=255 to Customer.email
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Added pattern=^[a-za-z0-9._%+-]+@[a-za-z0-9.-]+\.[a-za-z]{2,}$ to Customer.email
Task 2.5: Skipping enum_values=none (no values)
Task 2: Mapping format=email â†’ pattern
Added pattern=^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$ to Customer.email
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: Skipping format=none (no format specified)
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: format=datetime handled natively by Pydantic, skipping
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: format=uuid handled natively by Pydantic, skipping
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: format=uuid handled natively by Pydantic, skipping
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2: Mapping enum_values â†’ enum=['open', 'checked_out']
Updated Cart.status to Literal['open', 'checked_out']
Task 2: Skipping format=none (no format specified)
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: format=uuid handled natively by Pydantic, skipping
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: format=uuid handled natively by Pydantic, skipping
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: format=uuid handled natively by Pydantic, skipping
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=1'
Added ge=1 to CartItem.quantity
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: Skipping format=none (no format specified)
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=0.01'
Added ge=0.01 to CartItem.unit_price
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: Skipping format=none (no format specified)
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: format=uuid handled natively by Pydantic, skipping
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: format=uuid handled natively by Pydantic, skipping
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2: Mapping enum_values â†’ enum=['pending_payment', 'paid', 'cancelled']
Updated Order.order_status to Literal['pending_payment', 'paid', 'cancelled']
Task 2: Skipping format=none (no format specified)
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2: Mapping enum_values â†’ enum=['pending', 'simulated_ok', 'failed']
Updated Order.payment_status to Literal['pending', 'simulated_ok', 'failed']
Task 2: Skipping format=none (no format specified)
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=0'
Added ge=0 to Order.total_amount
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: Skipping format=none (no format specified)
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: format=datetime handled natively by Pydantic, skipping
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: format=uuid handled natively by Pydantic, skipping
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: format=uuid handled natively by Pydantic, skipping
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=none'
Bug #51: Skipping ge=none (invalid numeric value)
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: format=uuid handled natively by Pydantic, skipping
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=1'
Added ge=1 to OrderItem.quantity
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: Skipping format=none (no format specified)
Bug #51: Skipping min_length=none (invalid numeric value)
Bug #51: Skipping max_length=none (invalid numeric value)
Bug #45: Mapping 'min_value' â†’ 'ge=0.01'
Added ge=0.01 to OrderItem.unit_price
Bug #45: Mapping 'max_value' â†’ 'le=none'
Bug #51: Skipping le=none (invalid numeric value)
Bug #51: Skipping pattern=none (invalid pattern)
Task 2.5: Skipping enum_values=none (no values)
Task 2: Skipping format=none (no format specified)
Added gt=0 to Product.stock
Bug #45: Ignoring unrecognized constraint 'presence' from 'Product.name: presence'
Task 2: Unknown format=true, skipping
Bug #45: Ignoring unrecognized constraint 'uniqueness' from 'Customer.email: uniqueness'
Bug #45: Ignoring unrecognized constraint 'presence' from 'Customer.email: presence'
Bug #45: Ignoring unrecognized constraint 'presence' from 'Customer.full_name: presence'
Added gt=0 to Order.total_amount
Bug #45: Ignoring unrecognized constraint 'status_transition' from 'Cart.status: status_transition'
Bug #45: Ignoring unrecognized constraint 'status_transition' from 'Order.order_status: status_transition'
Bug #45: Ignoring unrecognized constraint 'custom' from 'Cart.customer_id: custom'
Bug #45: Ignoring unrecognized constraint 'custom' from 'CartItem.product_id: custom'
Bug #45: Ignoring unrecognized constraint 'stock_constraint' from 'CartItem.quantity: stock_constraint'
Bug #45: Ignoring unrecognized constraint 'custom' from 'Order.items: custom'
Bug #45: Ignoring unrecognized constraint 'stock_constraint' from 'Order.items: stock_constraint'
Bug #45: Ignoring unrecognized constraint 'workflow_constraint' from 'Order.order_status: workflow_constraint'
Bug #45: Ignoring unrecognized constraint 'custom' from 'Product.stock: custom'
Bug #45: Ignoring unrecognized constraint 'custom' from 'CartItem.unit_price: custom'
Bug #45: Ignoring unrecognized constraint 'custom' from 'OrderItem.unit_price: custom'
Bug #45: Ignoring unrecognized constraint 'custom' from 'Order.total_amount: custom'
Bug #45: Ignoring unrecognized constraint 'relationship' from 'Product.id: relationship'
Bug #45: Ignoring unrecognized constraint 'relationship' from 'Customer.id: relationship'
Bug #45: Ignoring unrecognized constraint 'relationship' from 'Cart.id: relationship'
Bug #45: Ignoring unrecognized constraint 'relationship' from 'Order.id: relationship'
Bug #45: Ignoring unrecognized constraint 'presence' from 'Product.id: presence'
Bug #45: Ignoring unrecognized constraint 'uniqueness' from 'Product.id: uniqueness'
Task 2: Unknown format=true, skipping
Task 2: Unknown format=true, skipping
Task 2: Unknown format=true, skipping
Bug #45: Ignoring unrecognized constraint 'presence' from 'Product.price: presence'
Bug #45: Ignoring unrecognized constraint 'presence' from 'Product.stock: presence'
Bug #45: Ignoring unrecognized constraint 'presence' from 'Product.is_active: presence'
Bug #45: Ignoring unrecognized constraint 'presence' from 'Customer.id: presence'
Bug #45: Ignoring unrecognized constraint 'uniqueness' from 'Customer.id: uniqueness'
Task 2: Unknown format=true, skipping
Task 2: Unknown format=true, skipping
Bug #45: Ignoring unrecognized constraint 'presence' from 'Customer.registration_date: presence'
Task 2: Unknown format=true, skipping
Bug #45: Ignoring unrecognized constraint 'presence' from 'Cart.id: presence'
Bug #45: Ignoring unrecognized constraint 'uniqueness' from 'Cart.id: uniqueness'
Task 2: Unknown format=true, skipping
Bug #45: Ignoring unrecognized constraint 'presence' from 'Cart.customer_id: presence'
Task 2: Unknown format=true, skipping
Bug #45: Ignoring unrecognized constraint 'presence' from 'Cart.status: presence'
Bug #45: Ignoring unrecognized constraint 'presence' from 'CartItem.id: presence'
Bug #45: Ignoring unrecognized constraint 'uniqueness' from 'CartItem.id: uniqueness'
Task 2: Unknown format=true, skipping
Bug #45: Ignoring unrecognized constraint 'presence' from 'CartItem.cart_id: presence'
Task 2: Unknown format=true, skipping
Bug #45: Ignoring unrecognized constraint 'presence' from 'CartItem.product_id: presence'
Task 2: Unknown format=true, skipping
Bug #45: Ignoring unrecognized constraint 'presence' from 'CartItem.quantity: presence'
Bug #45: Ignoring unrecognized constraint 'range' from 'CartItem.quantity: range'
Bug #45: Ignoring unrecognized constraint 'presence' from 'CartItem.unit_price: presence'
Bug #45: Ignoring unrecognized constraint 'presence' from 'Order.id: presence'
Bug #45: Ignoring unrecognized constraint 'uniqueness' from 'Order.id: uniqueness'
Task 2: Unknown format=true, skipping
Bug #45: Ignoring unrecognized constraint 'presence' from 'Order.customer_id: presence'
Task 2: Unknown format=true, skipping
Bug #45: Ignoring unrecognized constraint 'presence' from 'Order.order_status: presence'
Bug #45: Ignoring unrecognized constraint 'presence' from 'Order.payment_status: presence'
Bug #45: Ignoring unrecognized constraint 'status_transition' from 'Order.payment_status: status_transition'
Bug #45: Ignoring unrecognized constraint 'presence' from 'Order.total_amount: presence'
Bug #45: Ignoring unrecognized constraint 'presence' from 'Order.creation_date: presence'
Task 2: Unknown format=true, skipping
Bug #45: Ignoring unrecognized constraint 'presence' from 'OrderItem.id: presence'
Bug #45: Ignoring unrecognized constraint 'uniqueness' from 'OrderItem.id: uniqueness'
Task 2: Unknown format=true, skipping
Bug #45: Ignoring unrecognized constraint 'presence' from 'OrderItem.order_id: presence'
Task 2: Unknown format=true, skipping
Bug #45: Ignoring unrecognized constraint 'presence' from 'OrderItem.product_id: presence'
Task 2: Unknown format=true, skipping
Bug #45: Ignoring unrecognized constraint 'presence' from 'OrderItem.quantity: presence'
Bug #45: Ignoring unrecognized constraint 'range' from 'OrderItem.quantity: range'
Bug #45: Ignoring unrecognized constraint 'presence' from 'OrderItem.unit_price: presence'
âœ“ Applied 274 repairs
    â”œâ”€ Endpoints added: 0
    â”œâ”€ Validations added: 274
ğŸ“ Re-validating compliance...
Validating app at /home/kwar/code/agentic-ai/tests/e2e/generated_apps/ecommerce-api-spec-human_1764467618 using OpenAPI schema
Converting DATABASE_URL to async driver for validation
Successfully imported FastAPI app
Extracted 6 entities from OpenAPI schemas: ['Cart', 'CartItem', 'Customer', 'Order', 'OrderItem', 'Product']
After checking entities.py: 6 entities found: ['Cart', 'CartItem', 'Customer', 'Order', 'OrderItem', 'Product']
Extracted 34 endpoints from OpenAPI paths
Extracted 62 validations from OpenAPI schemas
After checking schemas.py with AST: 176 validations found
âœ… Extracted 34 SQLAlchemy constraints using AST parser
ğŸ§  Using SemanticMatcher for ML-based constraint matching
ğŸš€ Using IRSemanticMatcher for fast batch matching
Declarative base created
ğŸ§  IR matching: 308/310 = 99.4%
ğŸ“Š IRSemanticMatcher: 308/310 = 99.4%
âš ï¸ Semantic matching: 308/310 = 99.4%
   Unmatched: ['Order.items: custom', 'Order.items: stock_constraint']
ğŸ“Š SemanticMatcher: 308/310 validations matched = 99.4%
OpenAPI-based compliance validation complete: 99.9% (entities: 100.0%, endpoints: 100.0%, validations: 99.4%)
â„¹ï¸ Post-repair compliance: 99.9% â†’ 99.9%
    â”œâ”€ Status: âš ï¸
    â”œâ”€ Delta: +0.0%
    â”œâ”€ Validations: 308/310 â†’ 308/310
    â”œâ”€ Tests fixed: 274
â„¹ï¸ No improvement
    â”œâ”€ Status: =
    â”œâ”€ Message: Plateau reached
â„¹ï¸ Stopping iteration
    â”œâ”€ Reason: No improvement for 2 consecutive iterations

  ğŸ“Š CP-6.5.5: Metrics collected
  âœ… Phase 6.5 complete
    - Initial compliance: 99.9%
    - Final compliance: 99.9%
    - Improvement: +0.0%
âœ… Phase Complete: Code Repair
â–¶ï¸  Phase: Runtime Smoke Test

ğŸ”¥ Phase 8.5: Runtime Smoke Test (Task 10)
  ğŸ¯ Using IR-Centric Smoke Test (TestsIR - deterministic)
    ğŸ“ Phase 1: Generating TestsModelIR from ApplicationIR...
    ğŸ’¾ TestsModelIR saved: tests/e2e/generated_apps/ecommerce-api-spec-human_1764467618/tests_model_ir.json
    ğŸ“Š Generated 76 scenarios, 33 endpoint suites
    ğŸ“‹ By type: {'unit': 0, 'integration': 0, 'smoke': 76, 'contract': 0, 'e2e': 0}
    ğŸ”— Testing against: http://127.0.0.1:8002
    ğŸ§¹ Bug #145: Cleaning up previous containers/volumes for fresh DB state...
    ğŸ³ Starting Docker containers...
    â³ Waiting for server at http://127.0.0.1:8002...
HTTP Request: GET http://127.0.0.1:8002/health/health "HTTP/1.1 404 Not Found"
    âœ… Server ready in 0.0s (via http://127.0.0.1:8002/health/health)
    ğŸš€ Phase 2: Executing 76 scenarios...
HTTP Request: GET http://127.0.0.1:8002/health "HTTP/1.1 200 OK"
HTTP Request: GET http://127.0.0.1:8002/health/ready "HTTP/1.1 200 OK"
HTTP Request: POST http://127.0.0.1:8002/products "HTTP/1.1 201 Created"
HTTP Request: POST http://127.0.0.1:8002/products "HTTP/1.1 422 Unprocessable Entity"
HTTP Request: GET http://127.0.0.1:8002/products "HTTP/1.1 200 OK"
HTTP Request: GET http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001 "HTTP/1.1 200 OK"
HTTP Request: GET http://127.0.0.1:8002/products/00000000-0000-0000-0000-000000000000 "HTTP/1.1 404 Not Found"
HTTP Request: PUT http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001 "HTTP/1.1 200 OK"
HTTP Request: PUT http://127.0.0.1:8002/products/00000000-0000-0000-0000-000000000000 "HTTP/1.1 422 Unprocessable Entity"
HTTP Request: PUT http://127.0.0.1:8002/products/%7Bid%7D "HTTP/1.1 422 Unprocessable Entity"
HTTP Request: POST http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001/deactivate "HTTP/1.1 201 Created"
HTTP Request: POST http://127.0.0.1:8002/customers "HTTP/1.1 201 Created"
HTTP Request: POST http://127.0.0.1:8002/customers "HTTP/1.1 422 Unprocessable Entity"
HTTP Request: GET http://127.0.0.1:8002/customers/00000000-0000-4000-8000-000000000002 "HTTP/1.1 200 OK"
HTTP Request: GET http://127.0.0.1:8002/customers/00000000-0000-0000-0000-000000000000 "HTTP/1.1 404 Not Found"
HTTP Request: POST http://127.0.0.1:8002/carts "HTTP/1.1 201 Created"
HTTP Request: POST http://127.0.0.1:8002/carts "HTTP/1.1 422 Unprocessable Entity"
HTTP Request: GET http://127.0.0.1:8002/carts/00000000-0000-4000-8000-000000000003 "HTTP/1.1 200 OK"
HTTP Request: GET http://127.0.0.1:8002/carts/00000000-0000-0000-0000-000000000000 "HTTP/1.1 404 Not Found"
HTTP Request: POST http://127.0.0.1:8002/carts/00000000-0000-4000-8000-000000000003/items "HTTP/1.1 500 Internal Server Error"
HTTP Request: POST http://127.0.0.1:8002/carts/%7Bid%7D/items "HTTP/1.1 422 Unprocessable Entity"
HTTP Request: PUT http://127.0.0.1:8002/carts/00000000-0000-4000-8000-000000000003/items/00000000-0000-4000-8000-000000000006 "HTTP/1.1 200 OK"
HTTP Request: PUT http://127.0.0.1:8002/carts/00000000-0000-0000-0000-000000000000/items/00000000-0000-0000-0000-000000000000 "HTTP/1.1 422 Unprocessable Entity"
HTTP Request: PUT http://127.0.0.1:8002/carts/%7Bcart_id%7D/items/%7Bitem_id%7D "HTTP/1.1 422 Unprocessable Entity"
HTTP Request: POST http://127.0.0.1:8002/carts/00000000-0000-4000-8000-000000000003/clear "HTTP/1.1 201 Created"
HTTP Request: POST http://127.0.0.1:8002/orders "HTTP/1.1 422 Unprocessable Entity"
HTTP Request: POST http://127.0.0.1:8002/orders "HTTP/1.1 422 Unprocessable Entity"
HTTP Request: POST http://127.0.0.1:8002/orders/00000000-0000-4000-8000-000000000005/pay "HTTP/1.1 500 Internal Server Error"
HTTP Request: POST http://127.0.0.1:8002/orders/00000000-0000-4000-8000-000000000005/cancel "HTTP/1.1 500 Internal Server Error"
HTTP Request: GET http://127.0.0.1:8002/customers/00000000-0000-4000-8000-000000000002/orders "HTTP/1.1 200 OK"
HTTP Request: GET http://127.0.0.1:8002/customers/00000000-0000-0000-0000-000000000000/orders "HTTP/1.1 404 Not Found"
HTTP Request: GET http://127.0.0.1:8002/orders/00000000-0000-4000-8000-000000000005 "HTTP/1.1 200 OK"
HTTP Request: GET http://127.0.0.1:8002/orders/00000000-0000-0000-0000-000000000000 "HTTP/1.1 404 Not Found"
HTTP Request: GET http://127.0.0.1:8002/carts "HTTP/1.1 200 OK"
HTTP Request: GET http://127.0.0.1:8002/customers "HTTP/1.1 200 OK"
HTTP Request: GET http://127.0.0.1:8002/orders "HTTP/1.1 200 OK"
HTTP Request: DELETE http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001 "HTTP/1.1 204 No Content"
HTTP Request: DELETE http://127.0.0.1:8002/products/00000000-0000-0000-0000-000000000000 "HTTP/1.1 404 Not Found"
HTTP Request: DELETE http://127.0.0.1:8002/carts/00000000-0000-4000-8000-000000000003 "HTTP/1.1 204 No Content"
HTTP Request: DELETE http://127.0.0.1:8002/carts/00000000-0000-0000-0000-000000000000 "HTTP/1.1 404 Not Found"
HTTP Request: DELETE http://127.0.0.1:8002/customers/00000000-0000-4000-8000-000000000002 "HTTP/1.1 204 No Content"
HTTP Request: DELETE http://127.0.0.1:8002/customers/00000000-0000-0000-0000-000000000000 "HTTP/1.1 404 Not Found"
HTTP Request: DELETE http://127.0.0.1:8002/orders/00000000-0000-4000-8000-000000000005 "HTTP/1.1 204 No Content"
HTTP Request: DELETE http://127.0.0.1:8002/orders/00000000-0000-0000-0000-000000000000 "HTTP/1.1 404 Not Found"
HTTP Request: PATCH http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001/deactivate "HTTP/1.1 404 Not Found"
HTTP Request: PATCH http://127.0.0.1:8002/products/00000000-0000-0000-0000-000000000000/deactivate "HTTP/1.1 404 Not Found"
HTTP Request: PATCH http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001/activate "HTTP/1.1 404 Not Found"
HTTP Request: PATCH http://127.0.0.1:8002/products/00000000-0000-0000-0000-000000000000/activate "HTTP/1.1 404 Not Found"
HTTP Request: POST http://127.0.0.1:8002/carts/00000000-0000-4000-8000-000000000003/checkout "HTTP/1.1 500 Internal Server Error"
HTTP Request: DELETE http://127.0.0.1:8002/carts/00000000-0000-4000-8000-000000000003/items/00000000-0000-4000-8000-000000000001 "HTTP/1.1 404 Not Found"
HTTP Request: DELETE http://127.0.0.1:8002/carts/00000000-0000-0000-0000-000000000000/items/00000000-0000-0000-0000-000000000000 "HTTP/1.1 404 Not Found"
HTTP Request: PUT http://127.0.0.1:8002/orders/00000000-0000-4000-8000-000000000005/items/00000000-0000-4000-8000-000000000001 "HTTP/1.1 404 Not Found"
HTTP Request: PUT http://127.0.0.1:8002/orders/00000000-0000-0000-0000-000000000000/items/00000000-0000-0000-0000-000000000000 "HTTP/1.1 422 Unprocessable Entity"
HTTP Request: DELETE http://127.0.0.1:8002/orders/00000000-0000-4000-8000-000000000005/items/00000000-0000-4000-8000-000000000001 "HTTP/1.1 404 Not Found"
HTTP Request: DELETE http://127.0.0.1:8002/orders/00000000-0000-0000-0000-000000000000/items/00000000-0000-0000-0000-000000000000 "HTTP/1.1 404 Not Found"
HTTP Request: GET http://127.0.0.1:8002/metrics "HTTP/1.1 200 OK"
HTTP Request: POST http://127.0.0.1:8002/products "HTTP/1.1 201 Created"
HTTP Request: PUT http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001 "HTTP/1.1 404 Not Found"
HTTP Request: PUT http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001 "HTTP/1.1 404 Not Found"
HTTP Request: POST http://127.0.0.1:8002/products "HTTP/1.1 201 Created"
HTTP Request: POST http://127.0.0.1:8002/products "HTTP/1.1 201 Created"
HTTP Request: POST http://127.0.0.1:8002/products "HTTP/1.1 201 Created"
HTTP Request: PUT http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001 "HTTP/1.1 404 Not Found"
HTTP Request: DELETE http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001 "HTTP/1.1 404 Not Found"
HTTP Request: PUT http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001 "HTTP/1.1 404 Not Found"
HTTP Request: DELETE http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001 "HTTP/1.1 404 Not Found"
HTTP Request: PUT http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001 "HTTP/1.1 404 Not Found"
HTTP Request: POST http://127.0.0.1:8002/products "HTTP/1.1 201 Created"
HTTP Request: POST http://127.0.0.1:8002/products "HTTP/1.1 201 Created"
HTTP Request: PUT http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001 "HTTP/1.1 404 Not Found"
HTTP Request: PUT http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001 "HTTP/1.1 404 Not Found"
HTTP Request: PUT http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001 "HTTP/1.1 404 Not Found"
HTTP Request: PUT http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001 "HTTP/1.1 404 Not Found"
HTTP Request: PUT http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001 "HTTP/1.1 404 Not Found"
HTTP Request: GET http://127.0.0.1:8002/products "HTTP/1.1 200 OK"
HTTP Request: GET http://127.0.0.1:8002/customers/%7Bcustomer_id%7D/orders "HTTP/1.1 422 Unprocessable Entity"

  ğŸ“Š IR Smoke Test Results:
    - Total scenarios: 76
    - Passed: 53
    - Failed: 23
    - Pass rate: 69.7%
    - Endpoint coverage: 100.0%
    ğŸ’¾ Detailed results saved: tests/e2e/generated_apps/ecommerce-api-spec-human_1764467618/ir_smoke_test_results.json

  ğŸ“Š Smoke Test Results:
    - Scenarios tested: 76
    - Passed: 53
    - Failed: 23
    - Total time: 384ms
  âš ï¸ 23 scenarios failed smoke test
    âŒ POST /carts/{id}/items [add_item_to_cart_happy_path]: expected 201, got 500
    âŒ POST /orders [checkout_happy_path]: expected 201, got 422
    âŒ POST /orders/{id}/pay [pay_order_happy_path]: expected 201, got 500
    âŒ POST /orders/{id}/cancel [cancel_order_happy_path]: expected 201, got 500
    âŒ PATCH /products/{id}/deactivate [deactivate_product_happy_path]: expected 200, got 404
    ... and 18 more
  ğŸ’¾ Smoke test results saved: tests/e2e/generated_apps/ecommerce-api-spec-human_1764467618/smoke_test_results.json
Generated 23 learning events: 0 positive, 23 negative
ğŸ“Š Updated pattern scores: 5 patterns (avg score 0.35, promoted: 0, demoted: 0)
   Categories: routes: 5
   Events: +0 positive, -23 negative
ğŸ“Š Updated pattern scores: 5 patterns (avg score 0.35, promoted: 0, demoted: 0)
   Categories: routes: 5
   Events: +0 positive, -23 negative
  ğŸ“ Pattern learning: 5 patterns updated
Persisted IR correlation report to Neo4j
  ğŸ“ IR-Code correlation: 2 high-risk patterns
    âš ï¸ entity: Entities with >50% complexity and <70% pass rate...
    âš ï¸ entity: Entities with enum fields tend to have generation issues...
Processing 23 smoke violations
Created anti-pattern: gap_3caf45f3d35a (HTTP_500 on Cart)
Created anti-pattern: gap_894a51cd6cae (HTTP_422 on Order)
Created anti-pattern: gap_17d16ced7638 (HTTP_500 on Order)
Created anti-pattern: gap_8318f1f4177d (HTTP_500 on Order)
Created anti-pattern: gap_0f7e48cfde48 (HTTP_404 on Product)
Created anti-pattern: gap_774c3ac31de8 (HTTP_404 on Product)
Created anti-pattern: gap_450f5943d18d (HTTP_500 on Cart)
Created anti-pattern: gap_e3a0ffcc2b8e (HTTP_404 on Cart)
Created anti-pattern: gap_cfa8665ed2e3 (HTTP_404 on Order)
Created anti-pattern: gap_ff61d91aba7a (HTTP_404 on Order)
Created anti-pattern: gap_024af4dfa8d8 (HTTP_404 on Product)
Created anti-pattern: gap_024af4dfa8d8 (HTTP_404 on Product)
Created anti-pattern: gap_024af4dfa8d8 (HTTP_404 on Product)
Created anti-pattern: gap_caef819a2ad7 (HTTP_404 on Product)
Created anti-pattern: gap_024af4dfa8d8 (HTTP_404 on Product)
Created anti-pattern: gap_caef819a2ad7 (HTTP_404 on Product)
Created anti-pattern: gap_024af4dfa8d8 (HTTP_404 on Product)
Created anti-pattern: gap_024af4dfa8d8 (HTTP_404 on Product)
Created anti-pattern: gap_024af4dfa8d8 (HTTP_404 on Product)
Created anti-pattern: gap_024af4dfa8d8 (HTTP_404 on Product)
Created anti-pattern: gap_024af4dfa8d8 (HTTP_404 on Product)
Created anti-pattern: gap_024af4dfa8d8 (HTTP_404 on Product)
Created anti-pattern: gap_8400adbd1fc5 (HTTP_422 on Customer)
ğŸ“Š Generation feedback: 0 new, 23 updated anti-patterns [70ms]
ğŸ“Š Generation feedback: 0 new, 23 updated anti-patterns [70ms]
  ğŸ“ Generation Feedback Loop: 0 new, 23 updated anti-patterns
     (Classification rate: 100%)

  âŒ Phase 8.5 FAILED - Smoke test did not pass

  ğŸ”§ Starting Smoke-Driven Repair Loop (23 violations)

  ğŸ”§ Using Smoke-Driven Repair Orchestrator (Full Cycle)
    âœ… Delta IR Validator enabled (70% speedup)
    âœ… Repair Confidence Model enabled (probabilistic ranking)
    âœ… Fix Pattern Learner enabled (cross-session learning)
    âœ… IR-Code Correlator enabled (realignment after repair)
  âœ… Delta IR Validator enabled (70% validation speedup)
  âœ… Repair Confidence Model enabled (probabilistic ranking)
  âœ… Fix Pattern Learner enabled (cross-session learning)
ğŸ”„ Starting Full Smoke-Repair Cycle (max 3 cycles, Docker rebuild: True)

  ğŸ” Cycle 1/3
ğŸ§¹ Cleaning up previous containers/volumes: docker compose -f docker/docker-compose.yml down -v --remove-orphans
ğŸ³ Building Docker (no cache): docker compose -f docker/docker-compose.yml build --no-cache
ğŸ³ Starting Docker: docker compose -f docker/docker-compose.yml up -d
HTTP Request: GET http://127.0.0.1:8002/health "HTTP/1.1 200 OK"
âœ… Server started in 59671ms at http://127.0.0.1:8002
ğŸ” Testing 30 endpoints...
HTTP Request: POST http://127.0.0.1:8002/products "HTTP/1.1 201 Created"
  âœ… POST /products: 201
HTTP Request: GET http://127.0.0.1:8002/products "HTTP/1.1 200 OK"
  âœ… GET /products: 200
HTTP Request: GET http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001 "HTTP/1.1 200 OK"
  âœ… GET /products/{id}: 200
HTTP Request: PUT http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001 "HTTP/1.1 200 OK"
  âœ… PUT /products/{id}: 200
HTTP Request: POST http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001/deactivate "HTTP/1.1 201 Created"
  âœ… POST /products/{id}/deactivate: 201
HTTP Request: POST http://127.0.0.1:8002/customers "HTTP/1.1 201 Created"
  âœ… POST /customers: 201
HTTP Request: GET http://127.0.0.1:8002/customers/00000000-0000-4000-8000-000000000002 "HTTP/1.1 200 OK"
  âœ… GET /customers/{id}: 200
HTTP Request: POST http://127.0.0.1:8002/carts "HTTP/1.1 201 Created"
  âœ… POST /carts: 201
HTTP Request: GET http://127.0.0.1:8002/carts/00000000-0000-4000-8000-000000000003 "HTTP/1.1 200 OK"
  âœ… GET /carts/{id}: 200
HTTP Request: POST http://127.0.0.1:8002/carts/00000000-0000-4000-8000-000000000003/items "HTTP/1.1 500 Internal Server Error"
  âŒ POST /carts/{id}/items: HTTP_500
HTTP Request: PUT http://127.0.0.1:8002/carts/00000000-0000-4000-8000-000000000003/items/00000000-0000-4000-8000-000000000006 "HTTP/1.1 200 OK"
  âœ… PUT /carts/{cart_id}/items/{item_id}: 200
HTTP Request: POST http://127.0.0.1:8002/carts/00000000-0000-4000-8000-000000000003/clear "HTTP/1.1 201 Created"
  âœ… POST /carts/{id}/clear: 201
HTTP Request: POST http://127.0.0.1:8002/orders "HTTP/1.1 422 Unprocessable Entity"
  âœ… POST /orders: 422
HTTP Request: POST http://127.0.0.1:8002/orders/00000000-0000-4000-8000-000000000005/pay "HTTP/1.1 500 Internal Server Error"
  âŒ POST /orders/{id}/pay: HTTP_500
HTTP Request: POST http://127.0.0.1:8002/orders/00000000-0000-4000-8000-000000000005/cancel "HTTP/1.1 500 Internal Server Error"
  âŒ POST /orders/{id}/cancel: HTTP_500
HTTP Request: GET http://127.0.0.1:8002/customers/00000000-0000-4000-8000-000000000002/orders "HTTP/1.1 200 OK"
  âœ… GET /customers/{customer_id}/orders: 200
HTTP Request: GET http://127.0.0.1:8002/orders/00000000-0000-4000-8000-000000000005 "HTTP/1.1 200 OK"
  âœ… GET /orders/{id}: 200
HTTP Request: GET http://127.0.0.1:8002/carts "HTTP/1.1 200 OK"
  âœ… GET /carts: 200
HTTP Request: GET http://127.0.0.1:8002/customers "HTTP/1.1 200 OK"
  âœ… GET /customers: 200
HTTP Request: GET http://127.0.0.1:8002/orders "HTTP/1.1 200 OK"
  âœ… GET /orders: 200
HTTP Request: DELETE http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001 "HTTP/1.1 204 No Content"
  âœ… DELETE /products/{id}: 204
HTTP Request: DELETE http://127.0.0.1:8002/carts/00000000-0000-4000-8000-000000000003 "HTTP/1.1 204 No Content"
  âœ… DELETE /carts/{id}: 204
HTTP Request: DELETE http://127.0.0.1:8002/customers/00000000-0000-4000-8000-000000000002 "HTTP/1.1 204 No Content"
  âœ… DELETE /customers/{id}: 204
HTTP Request: DELETE http://127.0.0.1:8002/orders/00000000-0000-4000-8000-000000000005 "HTTP/1.1 204 No Content"
  âœ… DELETE /orders/{id}: 204
HTTP Request: PATCH http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001/deactivate "HTTP/1.1 404 Not Found"
  âœ… PATCH /products/{id}/deactivate: 404
HTTP Request: PATCH http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001/activate "HTTP/1.1 404 Not Found"
  âœ… PATCH /products/{id}/activate: 404
HTTP Request: POST http://127.0.0.1:8002/carts/00000000-0000-4000-8000-000000000003/checkout "HTTP/1.1 500 Internal Server Error"
  âŒ POST /carts/{id}/checkout: HTTP_500
HTTP Request: DELETE http://127.0.0.1:8002/carts/00000000-0000-4000-8000-000000000003/items/00000000-0000-4000-8000-000000000001 "HTTP/1.1 404 Not Found"
  âœ… DELETE /carts/{id}/items/{product_id}: 404
HTTP Request: PUT http://127.0.0.1:8002/orders/00000000-0000-4000-8000-000000000005/items/00000000-0000-4000-8000-000000000001 "HTTP/1.1 404 Not Found"
  âœ… PUT /orders/{id}/items/{product_id}: 404
HTTP Request: DELETE http://127.0.0.1:8002/orders/00000000-0000-4000-8000-000000000005/items/00000000-0000-4000-8000-000000000001 "HTTP/1.1 404 Not Found"
  âœ… DELETE /orders/{id}/items/{product_id}: 404
ğŸ“ Captured 1 stack traces from server logs
ğŸ³ Stopping Docker: docker compose -f docker/docker-compose.yml down -v --remove-orphans
    ğŸ“Š Pass rate: 86.7% (26/30)
    ğŸ” Found 1 stack traces
Failed to query NegativePatternStore: 'GenerationAntiPattern' object has no attribute 'wrong_code_pattern'
Failed to query NegativePatternStore: 'GenerationAntiPattern' object has no attribute 'wrong_code_pattern'
Failed to query NegativePatternStore: 'GenerationAntiPattern' object has no attribute 'wrong_code_pattern'
Failed to query NegativePatternStore: 'GenerationAntiPattern' object has no attribute 'wrong_code_pattern'
    ğŸ”§ Applied 4 repairs (0 from learned patterns)
    ğŸ³ Rebuilding Docker (--no-cache) for ecommerce-api-spec-human_1764467618...
Docker build failed: #0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 2B done
#1 DONE 0.0s
ERROR: failed to solve: failed to read dockerfile: open Dockerfile: no such file or directory

Recorded 4 violations Ã— 4 repairs = 16 pattern updates (success=False)
    ğŸ“ Recorded repair attempt #16 to FixPatternLearner

  ğŸ” Cycle 2/3
ğŸ§¹ Cleaning up previous containers/volumes: docker compose -f docker/docker-compose.yml down -v --remove-orphans
ğŸ³ Building Docker (no cache): docker compose -f docker/docker-compose.yml build --no-cache
ğŸ³ Starting Docker: docker compose -f docker/docker-compose.yml up -d
HTTP Request: GET http://127.0.0.1:8002/health "HTTP/1.1 200 OK"
âœ… Server started in 45182ms at http://127.0.0.1:8002
ğŸ” Testing 30 endpoints...
HTTP Request: POST http://127.0.0.1:8002/products "HTTP/1.1 201 Created"
  âœ… POST /products: 201
HTTP Request: GET http://127.0.0.1:8002/products "HTTP/1.1 200 OK"
  âœ… GET /products: 200
HTTP Request: GET http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001 "HTTP/1.1 200 OK"
  âœ… GET /products/{id}: 200
HTTP Request: PUT http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001 "HTTP/1.1 200 OK"
  âœ… PUT /products/{id}: 200
HTTP Request: POST http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001/deactivate "HTTP/1.1 201 Created"
  âœ… POST /products/{id}/deactivate: 201
HTTP Request: POST http://127.0.0.1:8002/customers "HTTP/1.1 201 Created"
  âœ… POST /customers: 201
HTTP Request: GET http://127.0.0.1:8002/customers/00000000-0000-4000-8000-000000000002 "HTTP/1.1 200 OK"
  âœ… GET /customers/{id}: 200
HTTP Request: POST http://127.0.0.1:8002/carts "HTTP/1.1 201 Created"
  âœ… POST /carts: 201
HTTP Request: GET http://127.0.0.1:8002/carts/00000000-0000-4000-8000-000000000003 "HTTP/1.1 200 OK"
  âœ… GET /carts/{id}: 200
HTTP Request: POST http://127.0.0.1:8002/carts/00000000-0000-4000-8000-000000000003/items "HTTP/1.1 500 Internal Server Error"
  âŒ POST /carts/{id}/items: HTTP_500
HTTP Request: PUT http://127.0.0.1:8002/carts/00000000-0000-4000-8000-000000000003/items/00000000-0000-4000-8000-000000000006 "HTTP/1.1 200 OK"
  âœ… PUT /carts/{cart_id}/items/{item_id}: 200
HTTP Request: POST http://127.0.0.1:8002/carts/00000000-0000-4000-8000-000000000003/clear "HTTP/1.1 201 Created"
  âœ… POST /carts/{id}/clear: 201
HTTP Request: POST http://127.0.0.1:8002/orders "HTTP/1.1 422 Unprocessable Entity"
  âœ… POST /orders: 422
HTTP Request: POST http://127.0.0.1:8002/orders/00000000-0000-4000-8000-000000000005/pay "HTTP/1.1 500 Internal Server Error"
  âŒ POST /orders/{id}/pay: HTTP_500
HTTP Request: POST http://127.0.0.1:8002/orders/00000000-0000-4000-8000-000000000005/cancel "HTTP/1.1 500 Internal Server Error"
  âŒ POST /orders/{id}/cancel: HTTP_500
HTTP Request: GET http://127.0.0.1:8002/customers/00000000-0000-4000-8000-000000000002/orders "HTTP/1.1 200 OK"
  âœ… GET /customers/{customer_id}/orders: 200
HTTP Request: GET http://127.0.0.1:8002/orders/00000000-0000-4000-8000-000000000005 "HTTP/1.1 200 OK"
  âœ… GET /orders/{id}: 200
HTTP Request: GET http://127.0.0.1:8002/carts "HTTP/1.1 200 OK"
  âœ… GET /carts: 200
HTTP Request: GET http://127.0.0.1:8002/customers "HTTP/1.1 200 OK"
  âœ… GET /customers: 200
HTTP Request: GET http://127.0.0.1:8002/orders "HTTP/1.1 200 OK"
  âœ… GET /orders: 200
HTTP Request: DELETE http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001 "HTTP/1.1 204 No Content"
  âœ… DELETE /products/{id}: 204
HTTP Request: DELETE http://127.0.0.1:8002/carts/00000000-0000-4000-8000-000000000003 "HTTP/1.1 204 No Content"
  âœ… DELETE /carts/{id}: 204
HTTP Request: DELETE http://127.0.0.1:8002/customers/00000000-0000-4000-8000-000000000002 "HTTP/1.1 204 No Content"
  âœ… DELETE /customers/{id}: 204
HTTP Request: DELETE http://127.0.0.1:8002/orders/00000000-0000-4000-8000-000000000005 "HTTP/1.1 204 No Content"
  âœ… DELETE /orders/{id}: 204
HTTP Request: PATCH http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001/deactivate "HTTP/1.1 404 Not Found"
  âœ… PATCH /products/{id}/deactivate: 404
HTTP Request: PATCH http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001/activate "HTTP/1.1 404 Not Found"
  âœ… PATCH /products/{id}/activate: 404
HTTP Request: POST http://127.0.0.1:8002/carts/00000000-0000-4000-8000-000000000003/checkout "HTTP/1.1 500 Internal Server Error"
  âŒ POST /carts/{id}/checkout: HTTP_500
HTTP Request: DELETE http://127.0.0.1:8002/carts/00000000-0000-4000-8000-000000000003/items/00000000-0000-4000-8000-000000000001 "HTTP/1.1 404 Not Found"
  âœ… DELETE /carts/{id}/items/{product_id}: 404
HTTP Request: PUT http://127.0.0.1:8002/orders/00000000-0000-4000-8000-000000000005/items/00000000-0000-4000-8000-000000000001 "HTTP/1.1 404 Not Found"
  âœ… PUT /orders/{id}/items/{product_id}: 404
HTTP Request: DELETE http://127.0.0.1:8002/orders/00000000-0000-4000-8000-000000000005/items/00000000-0000-4000-8000-000000000001 "HTTP/1.1 404 Not Found"
  âœ… DELETE /orders/{id}/items/{product_id}: 404
ğŸ“ Captured 1 stack traces from server logs
ğŸ³ Stopping Docker: docker compose -f docker/docker-compose.yml down -v --remove-orphans
    ğŸ“Š Pass rate: 86.7% (26/30)
    ğŸ“ˆ Converged at 86.7%

============================================================
ğŸ“Š SMOKE-REPAIR CYCLE SUMMARY
============================================================
  Initial pass rate: 86.7%
  Final pass rate:   86.7%
  Improvement:       +0.0%
  Iterations:        2
  Total repairs:     4
  Target reached:    âŒ
  âš ï¸ Convergence detected (no further improvement)
  Duration:          131050ms
============================================================
  ğŸ§  Learned patterns applied: 0

  ğŸ“Š Smoke-Driven Repair Results:
    - Iterations: 2
    - Initial pass rate: 86.7%
    - Final pass rate: 86.7%
    - Target reached: âŒ
    - Converged: True
    - Regressed: False
    - Total repairs: 4
    - Duration: 131050ms

    Applied fixes:
      - [generic] Generic error on POST /carts/{id}/items: HTTP_500
      - [generic] Generic error on POST /orders/{id}/pay: HTTP_500
      - [generic] Generic error on POST /orders/{id}/cancel: HTTP_500
      - [generic] Generic error on POST /carts/{id}/checkout: HTTP_500

  ğŸ”„ Realigning IR after repairs...
ğŸ§¹ Cleaning up previous containers/volumes: docker compose -f docker/docker-compose.yml down -v --remove-orphans
ğŸ³ Building Docker (no cache): docker compose -f docker/docker-compose.yml build --no-cache
ğŸ³ Starting Docker: docker compose -f docker/docker-compose.yml up -d
HTTP Request: GET http://127.0.0.1:8002/health "HTTP/1.1 200 OK"
âœ… Server started in 48428ms at http://127.0.0.1:8002
ğŸ” Testing 30 endpoints...
HTTP Request: POST http://127.0.0.1:8002/products "HTTP/1.1 201 Created"
  âœ… POST /products: 201
HTTP Request: GET http://127.0.0.1:8002/products "HTTP/1.1 200 OK"
  âœ… GET /products: 200
HTTP Request: GET http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001 "HTTP/1.1 200 OK"
  âœ… GET /products/{id}: 200
HTTP Request: PUT http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001 "HTTP/1.1 200 OK"
  âœ… PUT /products/{id}: 200
HTTP Request: POST http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001/deactivate "HTTP/1.1 201 Created"
  âœ… POST /products/{id}/deactivate: 201
HTTP Request: POST http://127.0.0.1:8002/customers "HTTP/1.1 201 Created"
  âœ… POST /customers: 201
HTTP Request: GET http://127.0.0.1:8002/customers/00000000-0000-4000-8000-000000000002 "HTTP/1.1 200 OK"
  âœ… GET /customers/{id}: 200
HTTP Request: POST http://127.0.0.1:8002/carts "HTTP/1.1 201 Created"
  âœ… POST /carts: 201
HTTP Request: GET http://127.0.0.1:8002/carts/00000000-0000-4000-8000-000000000003 "HTTP/1.1 200 OK"
  âœ… GET /carts/{id}: 200
HTTP Request: POST http://127.0.0.1:8002/carts/00000000-0000-4000-8000-000000000003/items "HTTP/1.1 500 Internal Server Error"
  âŒ POST /carts/{id}/items: HTTP_500
HTTP Request: PUT http://127.0.0.1:8002/carts/00000000-0000-4000-8000-000000000003/items/00000000-0000-4000-8000-000000000006 "HTTP/1.1 200 OK"
  âœ… PUT /carts/{cart_id}/items/{item_id}: 200
HTTP Request: POST http://127.0.0.1:8002/carts/00000000-0000-4000-8000-000000000003/clear "HTTP/1.1 201 Created"
  âœ… POST /carts/{id}/clear: 201
HTTP Request: POST http://127.0.0.1:8002/orders "HTTP/1.1 422 Unprocessable Entity"
  âœ… POST /orders: 422
HTTP Request: POST http://127.0.0.1:8002/orders/00000000-0000-4000-8000-000000000005/pay "HTTP/1.1 500 Internal Server Error"
  âŒ POST /orders/{id}/pay: HTTP_500
HTTP Request: POST http://127.0.0.1:8002/orders/00000000-0000-4000-8000-000000000005/cancel "HTTP/1.1 500 Internal Server Error"
  âŒ POST /orders/{id}/cancel: HTTP_500
HTTP Request: GET http://127.0.0.1:8002/customers/00000000-0000-4000-8000-000000000002/orders "HTTP/1.1 200 OK"
  âœ… GET /customers/{customer_id}/orders: 200
HTTP Request: GET http://127.0.0.1:8002/orders/00000000-0000-4000-8000-000000000005 "HTTP/1.1 200 OK"
  âœ… GET /orders/{id}: 200
HTTP Request: GET http://127.0.0.1:8002/carts "HTTP/1.1 200 OK"
  âœ… GET /carts: 200
HTTP Request: GET http://127.0.0.1:8002/customers "HTTP/1.1 200 OK"
  âœ… GET /customers: 200
HTTP Request: GET http://127.0.0.1:8002/orders "HTTP/1.1 200 OK"
  âœ… GET /orders: 200
HTTP Request: DELETE http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001 "HTTP/1.1 204 No Content"
  âœ… DELETE /products/{id}: 204
HTTP Request: DELETE http://127.0.0.1:8002/carts/00000000-0000-4000-8000-000000000003 "HTTP/1.1 204 No Content"
  âœ… DELETE /carts/{id}: 204
HTTP Request: DELETE http://127.0.0.1:8002/customers/00000000-0000-4000-8000-000000000002 "HTTP/1.1 204 No Content"
  âœ… DELETE /customers/{id}: 204
HTTP Request: DELETE http://127.0.0.1:8002/orders/00000000-0000-4000-8000-000000000005 "HTTP/1.1 204 No Content"
  âœ… DELETE /orders/{id}: 204
HTTP Request: PATCH http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001/deactivate "HTTP/1.1 404 Not Found"
  âœ… PATCH /products/{id}/deactivate: 404
HTTP Request: PATCH http://127.0.0.1:8002/products/00000000-0000-4000-8000-000000000001/activate "HTTP/1.1 404 Not Found"
  âœ… PATCH /products/{id}/activate: 404
HTTP Request: POST http://127.0.0.1:8002/carts/00000000-0000-4000-8000-000000000003/checkout "HTTP/1.1 500 Internal Server Error"
  âŒ POST /carts/{id}/checkout: HTTP_500
HTTP Request: DELETE http://127.0.0.1:8002/carts/00000000-0000-4000-8000-000000000003/items/00000000-0000-4000-8000-000000000001 "HTTP/1.1 404 Not Found"
  âœ… DELETE /carts/{id}/items/{product_id}: 404
HTTP Request: PUT http://127.0.0.1:8002/orders/00000000-0000-4000-8000-000000000005/items/00000000-0000-4000-8000-000000000001 "HTTP/1.1 404 Not Found"
  âœ… PUT /orders/{id}/items/{product_id}: 404
HTTP Request: DELETE http://127.0.0.1:8002/orders/00000000-0000-4000-8000-000000000005/items/00000000-0000-4000-8000-000000000001 "HTTP/1.1 404 Not Found"
  âœ… DELETE /orders/{id}/items/{product_id}: 404
ğŸ“ Captured 1 stack traces from server logs
ğŸ³ Stopping Docker: docker compose -f docker/docker-compose.yml down -v --remove-orphans
ğŸ”„ Realigning IR after repair (Î” pass rate: +16.9%)
Persisted IR realignment to Neo4j
  âœ… IR realigned: 0 entities, 9 endpoints affected
    âœ… IR realigned: 0 entities, 9 endpoints affected
    ğŸ“ˆ Pass rate delta: +16.9%

  âš ï¸ Converged at 86.7% (no further improvement)

  âŒ Phase 8.5 FAILED - Smoke test did not pass after repair
âœ… Phase Complete: Runtime Smoke Test
â–¶ï¸  Phase: Validation

âœ… Phase 7: Validation (Enhanced with Semantic Validation)
  âœ“ Checkpoint: CP-7.1: File structure validated (1/5)
  âœ“ Checkpoint: CP-7.2: Syntax validation (2/5)

  ğŸ“Š Validating dependency execution order...
    Wave 1: 6 requirements (dependency level 1/3)
    Wave 2: 11 requirements (dependency level 2/3)
  âœ… Execution order validated: 2 dependency waves respected
  âœ“ Checkpoint: CP-7.2.5: Dependency order validated (3/5)

  ğŸ” Running semantic validation (ComplianceValidator)...
    (Using validation source: ApplicationIR)
Validating app at /home/kwar/code/agentic-ai/tests/e2e/generated_apps/ecommerce-api-spec-human_1764467618 using OpenAPI schema
Converting DATABASE_URL to async driver for validation
Successfully imported FastAPI app
Extracted 6 entities from OpenAPI schemas: ['Cart', 'CartItem', 'Customer', 'Order', 'OrderItem', 'Product']
After checking entities.py: 6 entities found: ['Cart', 'CartItem', 'Customer', 'Order', 'OrderItem', 'Product']
Extracted 34 endpoints from OpenAPI paths
Extracted 62 validations from OpenAPI schemas
After checking schemas.py with AST: 176 validations found
âœ… Extracted 34 SQLAlchemy constraints using AST parser
ğŸ§  Using SemanticMatcher for ML-based constraint matching
ğŸš€ Using IRSemanticMatcher for fast batch matching
Declarative base created
ğŸ§  IR matching: 308/310 = 99.4%
ğŸ“Š IRSemanticMatcher: 308/310 = 99.4%
âš ï¸ Semantic matching: 308/310 = 99.4%
   Unmatched: ['Order.items: custom', 'Order.items: stock_constraint']
ğŸ“Š SemanticMatcher: 308/310 validations matched = 99.4%
OpenAPI-based compliance validation complete: 99.9% (entities: 100.0%, endpoints: 100.0%, validations: 99.4%)
  âœ… Semantic validation PASSED: 99.9% compliance

ğŸŒ Endpoints: 33/33 required matched (+1 inferred = 34 total)
   âœ… GET /health, GET /health/ready, GET /metrics, GET /products, POST /products
   ... and 28 more required

   ğŸ“ Inferred endpoints (best practices): 1
   - GET /

ğŸ“¦ Entities (6 required, 6 present):
   âœ… Cart, CartItem, Customer, Order, OrderItem, Product
  âœ“ Checkpoint: CP-7.3: Semantic validation complete (4/5)

  ğŸ” Running UUID serialization validation...
  âœ… UUID serialization validation PASSED (no issues found)
  âœ“ Checkpoint: CP-7.3.5: UUID serialization validated (5/5)
  âœ“ Checkpoint: CP-7.4: Business logic validation (6/5)

  ğŸ”¬ Running IR-based Compliance Check (Dual Mode)...
    ğŸ“Š STRICT mode (exact matching):
ğŸ“‹ Entity compliance (strict): 100.0%
ğŸ“‹ Flow compliance (strict): 100.0%
ğŸ“‹ Constraint compliance (strict): 70.5%
ğŸ“Š Overall IR compliance (strict): 90.2%
      âœ… Entities: 100.0%
      âœ… Flows: 100.0%
      âš ï¸ Constraints: 70.5%
    ğŸ“ˆ RELAXED mode (semantic matching):
ğŸ“‹ Entity compliance (relaxed): 100.0%
ğŸ“‹ Flow compliance (relaxed): 100.0%
ğŸ“‹ Constraint compliance (relaxed): 54.7%
ğŸ“Š Overall IR compliance (relaxed): 84.9%
      âœ… Entities: 100.0%
      âœ… Flows: 100.0%
      âš ï¸ Constraints: 54.7%
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Compliance Metrics Dashboard           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Semantic Compliance:      99.9% âœ…              â”‚
â”‚ IR Compliance (Relaxed):  84.9% âš ï¸              â”‚
â”‚ IR Compliance (Strict):   90.2% âœ… (dev-only)   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Entities:  sem=100% rel=100% str=100%    â”‚
â”‚ Flows:     sem=100% rel=100% str=100%    â”‚
â”‚ Constraints:sem= 99% rel= 55% str= 71%    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  ğŸ’¡ Note: Constraint compliance (52-71%) is expected because:
     - Semantic equivalents (range vs ge/le) counted as misses
     - Schema decorators differ from IR format (Pydantic vs OpenAPI)
     - 100% functional compliance achieved (entities, endpoints, flows)
  âœ“ Checkpoint: CP-7.4.5: IR compliance validated (7/5)
  âœ“ Checkpoint: CP-7.5: Test generation check (8/5)
  ğŸ“‹ Test files discovered: 4
  âœ… Tests executed: 244 total (from 4 files)
     - Passed: 157
     - Failed: 87
  âœ“ Checkpoint: CP-7.6: Quality metrics (9/5)
âœ… Phase Completed: validation (13639ms)

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    âœ… Validation Results Summary
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Metric                                  |           Result            |     Status
  --------------------------------------------------------------------------------------------------------------
    Semantic Compliance                     |            99.9%        |       âœ…     
    Entities                                |              6/6        |       âœ…     
    Endpoints                               |            34/33        |       âœ…     
    Files Generated                         |               96        |       âœ…     
    Test Pass Rate                          |            64.3%        |      âš ï¸     
    Contract Validation                     |           PASSED        |       âœ…     
  --------------------------------------------------------------------------------------------------------------
    Overall Validation Status: âœ… PASSED                                          
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âœ… Quality gate PASSED for dev

ğŸš¦ Quality Gate Report
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Environment: DEV                                  â”‚
â”‚ Status: âœ… PASSED                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Compliance                                       â”‚
â”‚   Semantic:  100.0% â‰¥  90.0% âœ…              â”‚
â”‚   IR Relaxed: 84.9% â‰¥  70.0% âœ…              â”‚
â”‚   IR Strict:  90.2% â‰¥  50.0% âœ…              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Quality Counts                                   â”‚
â”‚   Errors:       0 â‰¤    5 âœ…                      â”‚
â”‚   Warnings:     3 â‰¤   20 âœ…                      â”‚
â”‚   Regressions:  0 (allowed) âœ…                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  ğŸš¦ Quality gate result saved: tests/e2e/generated_apps/ecommerce-api-spec-human_1764467618/quality_gate.json
  âœ“ Checkpoint: CP-7.7: Quality gate evaluated (10/5)
âœ… Phase Complete: Validation
â–¶ï¸  Phase: Health Verification

ğŸ¥ Phase 9: Health Verification
  âœ“ File check: src/main.py
  âœ“ File check: requirements.txt
  âœ“ File check: README.md (README.md (auto-created))
  âœ“ Checkpoint: CP-9.1: Step 1 (1/5)
  âœ“ Checkpoint: CP-9.2: Step 2 (2/5)
  âœ“ Checkpoint: CP-9.3: Step 3 (3/5)
  âœ“ Checkpoint: CP-9.4: Step 4 (4/5)
  âœ“ Checkpoint: CP-9.5: Step 5 (5/5)
âœ… Phase Completed: health_verification (1103ms)
  âœ… App is ready to run!

ğŸ‰ PIPELINE COMPLETO: App generada en tests/e2e/generated_apps/ecommerce-api-spec-human_1764467618
âœ… Phase Complete: Health Verification
â–¶ï¸  Phase: Learning

ğŸ§  Phase 10: Learning
  âœ“ Checkpoint: CP-10.1: Execution status assessed (1/5)
Stored candidate 08b08eb0-8b5e-48b1-94a9-2caf77ecc421
  âœ“ Checkpoint: CP-10.2: Pattern registered (2/5)
  âœ“ Checkpoint: CP-10.3: Checking promotion candidates (3/5)
Checking 1 patterns for promotion eligibility
â³ Pattern 08b08eb0... pending (score: 0.00 < 0.7)
Promotion check complete: 0/1 promoted
  âœ“ Checkpoint: CP-10.4: Promotion check complete (4/5)
    - Total candidates: 1
    - Promoted: 0
    - Failed: 1
  âœ“ Checkpoint: CP-10.5: Learning phase complete (5/5)
âœ… Phase Completed: learning (114ms)
  âœ… Learning phase complete
âœ… Phase Complete: Learning

============================================================
ğŸ Pipeline finished
============================================================
DomainModelGraphRepository connection closed
APIModelGraphRepository connection closed
FullIRGraphLoader connection closed
IRPersistenceService closed
Generating learning report...
Found 0 failure patterns
Found 0 success patterns
Found 0 entity error profiles
Learning report generated: 0 failures, 0 successes, 1 insights

ğŸ“ Learning Insights:
    ğŸ’¡ Most effective fix strategy: 'None' with 0% confidence

ğŸ“Š Metrics saved to: tests/e2e/metrics/real_e2e_ecommerce-api-spec-human_1764467618.json



==========================================================================================
                              ğŸ“Š REPORTE COMPLETO E2E                              
==========================================================================================

ğŸ¯ EXECUTION SUMMARY
------------------------------------------------------------------------------------------
  Spec:                tests/e2e/test_specs/ecommerce-api-spec-human.md
  Output:              tests/e2e/generated_apps/ecommerce-api-spec-human_1764467618
  Status:              partial_success
  Duration:            7.6 minutes (455576ms)
  Overall Progress:    100.0%
  Execution Success:   100.0%
  Pipeline Ops Rate:   100.0%

ğŸ§ª TESTING & QUALITY
------------------------------------------------------------------------------------------
  Generated Tests:     64.3% pass rate
     Note: Includes research/stress tests (no-gating).
           Gating criteria: semantic + IR compliance, not tests.
  Contract Violations: 0
  Acceptance Criteria: 0/0

ğŸ“š PATTERN LEARNING & REUSE
------------------------------------------------------------------------------------------
  Pattern Reuse Rate:  100.0%
  Patterns Matched:    10
  Patterns Stored:     1
  Patterns Promoted:   0
  Patterns Reused:     10
  New Patterns:        0
  Candidates Created:  1

ğŸ”§ CODE REPAIR & RECOVERY
------------------------------------------------------------------------------------------
  Repair Applied:      True
  Repair Iterations:   2
  Repair Improvement:  0.0%
  Tests Fixed:         0
  Regressions:         0
  Repair Time:         3548.2ms

âš ï¸  ERROR TRACKING & RECOVERY
------------------------------------------------------------------------------------------
  Total Errors:        2
  Recovered Errors:    0
  Critical Errors:     2
  Recovery Rate:       0.0%

ğŸ’¾ RESOURCE USAGE
------------------------------------------------------------------------------------------
  Peak Memory:         120.6 MB
  Avg Memory:          45.9 MB
  Peak CPU:            10.0%
  Avg CPU:             0.8%

ğŸ¤– LLM USAGE & COST
------------------------------------------------------------------------------------------
  Total API Calls:     1
  Total Tokens:        6,160
    â”œâ”€ Prompt Tokens:  3,319
    â””â”€ Completion:     2,841
  Estimated Cost:      $0.05 USD

ğŸ—„ï¸  DATABASE PERFORMANCE
------------------------------------------------------------------------------------------
  Neo4j Queries:       0
  Qdrant Queries:      0
  Neo4j IR Persistence: âš ï¸ Stats unavailable

â±ï¸  PHASE EXECUTION TIMES
------------------------------------------------------------------------------------------
  âœ… spec_ingestion             42452ms  (4/4 checkpoints)
  âœ… requirements_analysis        554ms  (5/5 checkpoints)
  âœ… multi_pass_planning          103ms  (5/5 checkpoints)
  âœ… atomization                 1302ms  (5/5 checkpoints)
  âœ… dag_construction            1603ms  (5/5 checkpoints)
  âœ… wave_execution              1517ms  (5/5 checkpoints)
  âœ… validation                 13639ms  (10/5 checkpoints)
  âœ… deployment                 86250ms  (8/5 checkpoints)
  âœ… health_verification         1103ms  (5/5 checkpoints)
  âœ… learning                     114ms  (5/5 checkpoints)

ğŸ“‹ SEMANTIC COMPLIANCE
------------------------------------------------------------------------------------------
  Overall Compliance:  99.9%
    â”œâ”€ Entities:       100.0% (6/6)
    â”œâ”€ Endpoints:      100.0% (34/33)
    â””â”€ Validations:    99.4% (308/310 required)

  ğŸ¯ Spec-to-App Precision: 99.9%
     â†’ Generated app fully implements spec requirements and executes successfully

ğŸ“Š PRECISION & ACCURACY METRICS
------------------------------------------------------------------------------------------
  ğŸ¯ Overall Pipeline Performance:
     Ops Success:      100.0%
     Precision:        78.8%

ğŸ”¬ RESEARCH METRICS (internal use only)
------------------------------------------------------------------------------------------
  ğŸ“Š Pattern Matching (RequirementsClassifier R&D):
     Precision:        80.0%
     Recall:           47.1%
     F1-Score:         59.3%
  ğŸ·ï¸  Classification Accuracy (research, not gating):
     Overall:          47.1%
     Note: Based on 17-19 top-level functional requirements,
           not 150 atomic IR requirements. See Task 3 in roadmap.

ğŸš€ HOW TO RUN THE GENERATED APP
------------------------------------------------------------------------------------------

  1. Navigate: cd tests/e2e/generated_apps/ecommerce-api-spec-human_1764467618
  2. Start:    docker-compose -f docker/docker-compose.yml up -d --build
  3. Health:   docker-compose -f docker/docker-compose.yml ps

  ğŸ“ Endpoints:
     - API:        http://localhost:8002
     - Docs:       http://localhost:8002/docs
     - Health:     http://localhost:8002/health/health
     - Metrics:    http://localhost:8002/metrics/metrics
     - Grafana:    http://localhost:3002 (devmatrix/admin)
     - Prometheus: http://localhost:9091
     - PostgreSQL: localhost:5433 (devmatrix/admin)

âœ… CONTRACT VALIDATION
------------------------------------------------------------------------------------------
  âœ… All contracts validated successfully!

==========================================================================================

