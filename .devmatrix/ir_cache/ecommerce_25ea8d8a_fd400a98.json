{
  "spec_hash": "25ea8d8a8334126c2af6a963725ff2421b229d8cd15b609fc514adc326024c61",
  "spec_path": "ecommerce.md",
  "generated_at": "2025-11-27T08:41:12.973838",
  "application_ir": {
    "app_id": "592611dc-7aba-4fed-ad2a-2a69eb505489",
    "name": "E-commerce API",
    "description": "A backend API for a basic e-commerce system that allows managing a product catalog, registering customers, creating shopping carts, placing orders, and viewing purchase history.",
    "domain_model": {
      "entities": [
        {
          "name": "Product",
          "attributes": [
            {
              "name": "id",
              "data_type": "UUID",
              "is_primary_key": true,
              "is_nullable": false,
              "is_unique": true,
              "default_value": null,
              "description": "Unique identifier for the product",
              "constraints": {
                "min_length": null,
                "max_length": null,
                "min_value": null,
                "max_value": null,
                "pattern": null,
                "enum_values": null,
                "format": "uuid"
              }
            },
            {
              "name": "name",
              "data_type": "string",
              "is_primary_key": false,
              "is_nullable": false,
              "is_unique": false,
              "default_value": null,
              "description": "Product name (e.g., 'iPhone 15 Pro')",
              "constraints": {
                "min_length": 1,
                "max_length": 255,
                "min_value": null,
                "max_value": null,
                "pattern": null,
                "enum_values": null,
                "format": null
              }
            },
            {
              "name": "description",
              "data_type": "string",
              "is_primary_key": false,
              "is_nullable": true,
              "is_unique": false,
              "default_value": null,
              "description": "Product description (e.g., 'Latest generation phone')",
              "constraints": {
                "min_length": null,
                "max_length": 2000,
                "min_value": null,
                "max_value": null,
                "pattern": null,
                "enum_values": null,
                "format": null
              }
            },
            {
              "name": "price",
              "data_type": "float",
              "is_primary_key": false,
              "is_nullable": false,
              "is_unique": false,
              "default_value": null,
              "description": "Product price (e.g., 999.99)",
              "constraints": {
                "min_length": null,
                "max_length": null,
                "min_value": 0.01,
                "max_value": null,
                "pattern": null,
                "enum_values": null,
                "format": null
              }
            },
            {
              "name": "stock",
              "data_type": "integer",
              "is_primary_key": false,
              "is_nullable": false,
              "is_unique": false,
              "default_value": 0,
              "description": "Available stock quantity (e.g., 50 units)",
              "constraints": {
                "min_length": null,
                "max_length": null,
                "min_value": 0,
                "max_value": null,
                "pattern": null,
                "enum_values": null,
                "format": null
              }
            },
            {
              "name": "is_active",
              "data_type": "boolean",
              "is_primary_key": false,
              "is_nullable": false,
              "is_unique": false,
              "default_value": true,
              "description": "Whether the product is active and available for purchase",
              "constraints": {
                "min_length": null,
                "max_length": null,
                "min_value": null,
                "max_value": null,
                "pattern": null,
                "enum_values": null,
                "format": null
              }
            }
          ],
          "relationships": [
            {
              "source_entity": "Product",
              "target_entity": "CartItem",
              "type": "one_to_many",
              "field_name": "cart_items",
              "back_populates": "product"
            },
            {
              "source_entity": "Product",
              "target_entity": "OrderItem",
              "type": "one_to_many",
              "field_name": "order_items",
              "back_populates": "product"
            }
          ],
          "description": "An item in the catalog that customers can purchase",
          "is_aggregate_root": true
        },
        {
          "name": "Customer",
          "attributes": [
            {
              "name": "id",
              "data_type": "UUID",
              "is_primary_key": true,
              "is_nullable": false,
              "is_unique": true,
              "default_value": null,
              "description": "Unique identifier for the customer",
              "constraints": {
                "min_length": null,
                "max_length": null,
                "min_value": null,
                "max_value": null,
                "pattern": null,
                "enum_values": null,
                "format": "uuid"
              }
            },
            {
              "name": "email",
              "data_type": "string",
              "is_primary_key": false,
              "is_nullable": false,
              "is_unique": true,
              "default_value": null,
              "description": "Customer email address (e.g., ariel@example.com)",
              "constraints": {
                "min_length": null,
                "max_length": 255,
                "min_value": null,
                "max_value": null,
                "pattern": "^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$",
                "enum_values": null,
                "format": "email"
              }
            },
            {
              "name": "full_name",
              "data_type": "string",
              "is_primary_key": false,
              "is_nullable": false,
              "is_unique": false,
              "default_value": null,
              "description": "Customer full name (e.g., 'Ariel Mart\u00ednez')",
              "constraints": {
                "min_length": 1,
                "max_length": 255,
                "min_value": null,
                "max_value": null,
                "pattern": null,
                "enum_values": null,
                "format": null
              }
            },
            {
              "name": "registration_date",
              "data_type": "datetime",
              "is_primary_key": false,
              "is_nullable": false,
              "is_unique": false,
              "default_value": "now()",
              "description": "Date when the customer registered (automatic, read-only)",
              "constraints": {
                "min_length": null,
                "max_length": null,
                "min_value": null,
                "max_value": null,
                "pattern": null,
                "enum_values": null,
                "format": "datetime"
              }
            }
          ],
          "relationships": [
            {
              "source_entity": "Customer",
              "target_entity": "Cart",
              "type": "one_to_many",
              "field_name": "carts",
              "back_populates": "customer"
            },
            {
              "source_entity": "Customer",
              "target_entity": "Order",
              "type": "one_to_many",
              "field_name": "orders",
              "back_populates": "customer"
            }
          ],
          "description": "A person who registers to make purchases",
          "is_aggregate_root": true
        },
        {
          "name": "Cart",
          "attributes": [
            {
              "name": "id",
              "data_type": "UUID",
              "is_primary_key": true,
              "is_nullable": false,
              "is_unique": true,
              "default_value": null,
              "description": "Unique identifier for the cart",
              "constraints": {
                "min_length": null,
                "max_length": null,
                "min_value": null,
                "max_value": null,
                "pattern": null,
                "enum_values": null,
                "format": "uuid"
              }
            },
            {
              "name": "customer_id",
              "data_type": "UUID",
              "is_primary_key": false,
              "is_nullable": false,
              "is_unique": false,
              "default_value": null,
              "description": "Reference to the customer who owns this cart",
              "constraints": {
                "min_length": null,
                "max_length": null,
                "min_value": null,
                "max_value": null,
                "pattern": null,
                "enum_values": null,
                "format": "uuid"
              }
            },
            {
              "name": "status",
              "data_type": "enum",
              "is_primary_key": false,
              "is_nullable": false,
              "is_unique": false,
              "default_value": "OPEN",
              "description": "Cart status: OPEN (active, can modify) or CHECKED_OUT (converted to order, cannot modify)",
              "constraints": {
                "min_length": null,
                "max_length": null,
                "min_value": null,
                "max_value": null,
                "pattern": null,
                "enum_values": [
                  "OPEN",
                  "CHECKED_OUT"
                ],
                "format": null
              }
            }
          ],
          "relationships": [
            {
              "source_entity": "Cart",
              "target_entity": "Customer",
              "type": "many_to_one",
              "field_name": "customer",
              "back_populates": "carts"
            },
            {
              "source_entity": "Cart",
              "target_entity": "CartItem",
              "type": "one_to_many",
              "field_name": "items",
              "back_populates": "cart"
            }
          ],
          "description": "A customer's temporary shopping cart",
          "is_aggregate_root": true
        },
        {
          "name": "CartItem",
          "attributes": [
            {
              "name": "id",
              "data_type": "UUID",
              "is_primary_key": true,
              "is_nullable": false,
              "is_unique": true,
              "default_value": null,
              "description": "Unique identifier for the cart item",
              "constraints": {
                "min_length": null,
                "max_length": null,
                "min_value": null,
                "max_value": null,
                "pattern": null,
                "enum_values": null,
                "format": "uuid"
              }
            },
            {
              "name": "cart_id",
              "data_type": "UUID",
              "is_primary_key": false,
              "is_nullable": false,
              "is_unique": false,
              "default_value": null,
              "description": "Reference to the cart this item belongs to",
              "constraints": {
                "min_length": null,
                "max_length": null,
                "min_value": null,
                "max_value": null,
                "pattern": null,
                "enum_values": null,
                "format": "uuid"
              }
            },
            {
              "name": "product_id",
              "data_type": "UUID",
              "is_primary_key": false,
              "is_nullable": false,
              "is_unique": false,
              "default_value": null,
              "description": "Reference to the product being purchased",
              "constraints": {
                "min_length": null,
                "max_length": null,
                "min_value": null,
                "max_value": null,
                "pattern": null,
                "enum_values": null,
                "format": "uuid"
              }
            },
            {
              "name": "quantity",
              "data_type": "integer",
              "is_primary_key": false,
              "is_nullable": false,
              "is_unique": false,
              "default_value": null,
              "description": "Quantity of the product (e.g., 2)",
              "constraints": {
                "min_length": null,
                "max_length": null,
                "min_value": 1,
                "max_value": null,
                "pattern": null,
                "enum_values": null,
                "format": null
              }
            },
            {
              "name": "unit_price",
              "data_type": "float",
              "is_primary_key": false,
              "is_nullable": false,
              "is_unique": false,
              "default_value": null,
              "description": "Snapshot of the product price at the time it was added to the cart",
              "constraints": {
                "min_length": null,
                "max_length": null,
                "min_value": 0.01,
                "max_value": null,
                "pattern": null,
                "enum_values": null,
                "format": null
              }
            }
          ],
          "relationships": [
            {
              "source_entity": "CartItem",
              "target_entity": "Cart",
              "type": "many_to_one",
              "field_name": "cart",
              "back_populates": "items"
            },
            {
              "source_entity": "CartItem",
              "target_entity": "Product",
              "type": "many_to_one",
              "field_name": "product",
              "back_populates": "cart_items"
            }
          ],
          "description": "An entry in the cart: a specific product with a quantity",
          "is_aggregate_root": false
        },
        {
          "name": "Order",
          "attributes": [
            {
              "name": "id",
              "data_type": "UUID",
              "is_primary_key": true,
              "is_nullable": false,
              "is_unique": true,
              "default_value": null,
              "description": "Unique identifier for the order",
              "constraints": {
                "min_length": null,
                "max_length": null,
                "min_value": null,
                "max_value": null,
                "pattern": null,
                "enum_values": null,
                "format": "uuid"
              }
            },
            {
              "name": "customer_id",
              "data_type": "UUID",
              "is_primary_key": false,
              "is_nullable": false,
              "is_unique": false,
              "default_value": null,
              "description": "Reference to the customer who placed the order",
              "constraints": {
                "min_length": null,
                "max_length": null,
                "min_value": null,
                "max_value": null,
                "pattern": null,
                "enum_values": null,
                "format": "uuid"
              }
            },
            {
              "name": "order_status",
              "data_type": "enum",
              "is_primary_key": false,
              "is_nullable": false,
              "is_unique": false,
              "default_value": "PENDING_PAYMENT",
              "description": "Order status: PENDING_PAYMENT (created, awaiting payment), PAID (payment confirmed), CANCELLED (customer cancelled)",
              "constraints": {
                "min_length": null,
                "max_length": null,
                "min_value": null,
                "max_value": null,
                "pattern": null,
                "enum_values": [
                  "PENDING_PAYMENT",
                  "PAID",
                  "CANCELLED"
                ],
                "format": null
              }
            },
            {
              "name": "payment_status",
              "data_type": "enum",
              "is_primary_key": false,
              "is_nullable": false,
              "is_unique": false,
              "default_value": "PENDING",
              "description": "Payment status: PENDING (waiting), SIMULATED_OK (simulated payment success), FAILED (simulated failure)",
              "constraints": {
                "min_length": null,
                "max_length": null,
                "min_value": null,
                "max_value": null,
                "pattern": null,
                "enum_values": [
                  "PENDING",
                  "SIMULATED_OK",
                  "FAILED"
                ],
                "format": null
              }
            },
            {
              "name": "total_amount",
              "data_type": "float",
              "is_primary_key": false,
              "is_nullable": false,
              "is_unique": false,
              "default_value": null,
              "description": "Total order amount (sum of all items \u00d7 quantity)",
              "constraints": {
                "min_length": null,
                "max_length": null,
                "min_value": 0,
                "max_value": null,
                "pattern": null,
                "enum_values": null,
                "format": null
              }
            },
            {
              "name": "created_at",
              "data_type": "datetime",
              "is_primary_key": false,
              "is_nullable": false,
              "is_unique": false,
              "default_value": "now()",
              "description": "Date when the order was created (automatic, read-only)",
              "constraints": {
                "min_length": null,
                "max_length": null,
                "min_value": null,
                "max_value": null,
                "pattern": null,
                "enum_values": null,
                "format": "datetime"
              }
            }
          ],
          "relationships": [
            {
              "source_entity": "Order",
              "target_entity": "Customer",
              "type": "many_to_one",
              "field_name": "customer",
              "back_populates": "orders"
            },
            {
              "source_entity": "Order",
              "target_entity": "OrderItem",
              "type": "one_to_many",
              "field_name": "items",
              "back_populates": "order"
            }
          ],
          "description": "A confirmed purchase created from a cart during checkout",
          "is_aggregate_root": true
        },
        {
          "name": "OrderItem",
          "attributes": [
            {
              "name": "id",
              "data_type": "UUID",
              "is_primary_key": true,
              "is_nullable": false,
              "is_unique": true,
              "default_value": null,
              "description": "Unique identifier for the order item",
              "constraints": {
                "min_length": null,
                "max_length": null,
                "min_value": null,
                "max_value": null,
                "pattern": null,
                "enum_values": null,
                "format": "uuid"
              }
            },
            {
              "name": "order_id",
              "data_type": "UUID",
              "is_primary_key": false,
              "is_nullable": false,
              "is_unique": false,
              "default_value": null,
              "description": "Reference to the order this item belongs to",
              "constraints": {
                "min_length": null,
                "max_length": null,
                "min_value": null,
                "max_value": null,
                "pattern": null,
                "enum_values": null,
                "format": "uuid"
              }
            },
            {
              "name": "product_id",
              "data_type": "UUID",
              "is_primary_key": false,
              "is_nullable": false,
              "is_unique": false,
              "default_value": null,
              "description": "Reference to the product that was purchased",
              "constraints": {
                "min_length": null,
                "max_length": null,
                "min_value": null,
                "max_value": null,
                "pattern": null,
                "enum_values": null,
                "format": "uuid"
              }
            },
            {
              "name": "quantity",
              "data_type": "integer",
              "is_primary_key": false,
              "is_nullable": false,
              "is_unique": false,
              "default_value": null,
              "description": "Quantity purchased",
              "constraints": {
                "min_length": null,
                "max_length": null,
                "min_value": 1,
                "max_value": null,
                "pattern": null,
                "enum_values": null,
                "format": null
              }
            },
            {
              "name": "unit_price",
              "data_type": "float",
              "is_primary_key": false,
              "is_nullable": false,
              "is_unique": false,
              "default_value": null,
              "description": "Snapshot of the product price at the time of purchase",
              "constraints": {
                "min_length": null,
                "max_length": null,
                "min_value": 0.01,
                "max_value": null,
                "pattern": null,
                "enum_values": null,
                "format": null
              }
            }
          ],
          "relationships": [
            {
              "source_entity": "OrderItem",
              "target_entity": "Order",
              "type": "many_to_one",
              "field_name": "order",
              "back_populates": "items"
            },
            {
              "source_entity": "OrderItem",
              "target_entity": "Product",
              "type": "many_to_one",
              "field_name": "product",
              "back_populates": "order_items"
            }
          ],
          "description": "A line in the order: a specific product with quantity and price at purchase time",
          "is_aggregate_root": false
        }
      ],
      "metadata": {}
    },
    "api_model": {
      "endpoints": [
        {
          "path": "/health/health",
          "method": "GET",
          "operation_id": "health_check",
          "summary": "Health check endpoint",
          "description": "Returns the health status of the API",
          "parameters": [],
          "request_schema": null,
          "response_schema": {
            "name": "HealthResponse",
            "fields": [
              {
                "name": "message",
                "type": "string",
                "required": true,
                "description": null
              },
              {
                "name": "status",
                "type": "string",
                "required": true,
                "description": null
              }
            ]
          },
          "auth_required": false,
          "tags": [
            "health"
          ],
          "inferred": false,
          "inference_source": "spec",
          "inference_reason": null
        },
        {
          "path": "/products",
          "method": "POST",
          "operation_id": "create_product",
          "summary": "Create a new product",
          "description": "Creates a new product with name, description, price, stock, and active status",
          "parameters": [],
          "request_schema": {
            "name": "ProductCreate",
            "fields": [
              {
                "name": "name",
                "type": "string",
                "required": true,
                "description": null
              },
              {
                "name": "description",
                "type": "string",
                "required": false,
                "description": null
              },
              {
                "name": "price",
                "type": "float",
                "required": true,
                "description": null
              },
              {
                "name": "stock",
                "type": "integer",
                "required": true,
                "description": null
              },
              {
                "name": "is_active",
                "type": "boolean",
                "required": false,
                "description": null
              }
            ]
          },
          "response_schema": {
            "name": "ProductResponse",
            "fields": [
              {
                "name": "id",
                "type": "UUID",
                "required": true,
                "description": null
              },
              {
                "name": "name",
                "type": "string",
                "required": true,
                "description": null
              },
              {
                "name": "description",
                "type": "string",
                "required": false,
                "description": null
              },
              {
                "name": "price",
                "type": "float",
                "required": true,
                "description": null
              },
              {
                "name": "stock",
                "type": "integer",
                "required": true,
                "description": null
              },
              {
                "name": "is_active",
                "type": "boolean",
                "required": true,
                "description": null
              }
            ]
          },
          "auth_required": false,
          "tags": [
            "products"
          ],
          "inferred": false,
          "inference_source": "spec",
          "inference_reason": null
        },
        {
          "path": "/products",
          "method": "GET",
          "operation_id": "list_products",
          "summary": "List active products",
          "description": "Returns a paginated list of all active products (is_active = true)",
          "parameters": [
            {
              "name": "skip",
              "location": "query",
              "data_type": "integer",
              "required": false,
              "description": "Number of records to skip for pagination (default: 0)"
            },
            {
              "name": "limit",
              "location": "query",
              "data_type": "integer",
              "required": false,
              "description": "Maximum number of records to return (default: 20)"
            }
          ],
          "request_schema": null,
          "response_schema": {
            "name": "ProductListResponse",
            "fields": [
              {
                "name": "items",
                "type": "array",
                "required": true,
                "description": null
              },
              {
                "name": "total",
                "type": "integer",
                "required": true,
                "description": null
              },
              {
                "name": "skip",
                "type": "integer",
                "required": true,
                "description": null
              },
              {
                "name": "limit",
                "type": "integer",
                "required": true,
                "description": null
              }
            ]
          },
          "auth_required": false,
          "tags": [
            "products"
          ],
          "inferred": false,
          "inference_source": "spec",
          "inference_reason": null
        },
        {
          "path": "/products/{product_id}",
          "method": "GET",
          "operation_id": "get_product",
          "summary": "Get product details",
          "description": "Returns all information for a specific product by ID. Returns 404 if not found.",
          "parameters": [
            {
              "name": "product_id",
              "location": "path",
              "data_type": "UUID",
              "required": true,
              "description": "Product ID"
            }
          ],
          "request_schema": null,
          "response_schema": {
            "name": "ProductResponse",
            "fields": [
              {
                "name": "id",
                "type": "UUID",
                "required": true,
                "description": null
              },
              {
                "name": "name",
                "type": "string",
                "required": true,
                "description": null
              },
              {
                "name": "description",
                "type": "string",
                "required": false,
                "description": null
              },
              {
                "name": "price",
                "type": "float",
                "required": true,
                "description": null
              },
              {
                "name": "stock",
                "type": "integer",
                "required": true,
                "description": null
              },
              {
                "name": "is_active",
                "type": "boolean",
                "required": true,
                "description": null
              }
            ]
          },
          "auth_required": false,
          "tags": [
            "products"
          ],
          "inferred": false,
          "inference_source": "spec",
          "inference_reason": null
        },
        {
          "path": "/products/{product_id}",
          "method": "PUT",
          "operation_id": "update_product",
          "summary": "Update product",
          "description": "Updates name, description, price, stock, or active status of an existing product",
          "parameters": [
            {
              "name": "product_id",
              "location": "path",
              "data_type": "UUID",
              "required": true,
              "description": "Product ID"
            }
          ],
          "request_schema": {
            "name": "ProductUpdate",
            "fields": [
              {
                "name": "name",
                "type": "string",
                "required": false,
                "description": null
              },
              {
                "name": "description",
                "type": "string",
                "required": false,
                "description": null
              },
              {
                "name": "price",
                "type": "float",
                "required": false,
                "description": null
              },
              {
                "name": "stock",
                "type": "integer",
                "required": false,
                "description": null
              },
              {
                "name": "is_active",
                "type": "boolean",
                "required": false,
                "description": null
              }
            ]
          },
          "response_schema": {
            "name": "ProductResponse",
            "fields": [
              {
                "name": "id",
                "type": "UUID",
                "required": true,
                "description": null
              },
              {
                "name": "name",
                "type": "string",
                "required": true,
                "description": null
              },
              {
                "name": "description",
                "type": "string",
                "required": false,
                "description": null
              },
              {
                "name": "price",
                "type": "float",
                "required": true,
                "description": null
              },
              {
                "name": "stock",
                "type": "integer",
                "required": true,
                "description": null
              },
              {
                "name": "is_active",
                "type": "boolean",
                "required": true,
                "description": null
              }
            ]
          },
          "auth_required": false,
          "tags": [
            "products"
          ],
          "inferred": false,
          "inference_source": "spec",
          "inference_reason": null
        },
        {
          "path": "/products/{product_id}/deactivate",
          "method": "POST",
          "operation_id": "deactivate_product",
          "summary": "Deactivate product",
          "description": "Marks a product as inactive (is_active = false). Does not delete it, just hides it.",
          "parameters": [
            {
              "name": "product_id",
              "location": "path",
              "data_type": "UUID",
              "required": true,
              "description": "Product ID"
            }
          ],
          "request_schema": null,
          "response_schema": {
            "name": "ProductResponse",
            "fields": [
              {
                "name": "id",
                "type": "UUID",
                "required": true,
                "description": null
              },
              {
                "name": "name",
                "type": "string",
                "required": true,
                "description": null
              },
              {
                "name": "description",
                "type": "string",
                "required": false,
                "description": null
              },
              {
                "name": "price",
                "type": "float",
                "required": true,
                "description": null
              },
              {
                "name": "stock",
                "type": "integer",
                "required": true,
                "description": null
              },
              {
                "name": "is_active",
                "type": "boolean",
                "required": true,
                "description": null
              }
            ]
          },
          "auth_required": false,
          "tags": [
            "products"
          ],
          "inferred": false,
          "inference_source": "spec",
          "inference_reason": null
        },
        {
          "path": "/customers",
          "method": "POST",
          "operation_id": "register_customer",
          "summary": "Register a new customer",
          "description": "Creates a new customer account with email and full name. Returns 400 if email already exists.",
          "parameters": [],
          "request_schema": {
            "name": "CustomerCreate",
            "fields": [
              {
                "name": "email",
                "type": "string",
                "required": true,
                "description": null
              },
              {
                "name": "full_name",
                "type": "string",
                "required": true,
                "description": null
              }
            ]
          },
          "response_schema": {
            "name": "CustomerResponse",
            "fields": [
              {
                "name": "id",
                "type": "UUID",
                "required": true,
                "description": null
              },
              {
                "name": "email",
                "type": "string",
                "required": true,
                "description": null
              },
              {
                "name": "full_name",
                "type": "string",
                "required": true,
                "description": null
              },
              {
                "name": "registration_date",
                "type": "datetime",
                "required": true,
                "description": null
              }
            ]
          },
          "auth_required": false,
          "tags": [
            "customers"
          ],
          "inferred": false,
          "inference_source": "spec",
          "inference_reason": null
        },
        {
          "path": "/customers/{customer_id}",
          "method": "GET",
          "operation_id": "get_customer",
          "summary": "Get customer details",
          "description": "Returns complete information for a customer by ID. Returns 404 if not found.",
          "parameters": [
            {
              "name": "customer_id",
              "location": "path",
              "data_type": "UUID",
              "required": true,
              "description": "Customer ID"
            }
          ],
          "request_schema": null,
          "response_schema": {
            "name": "CustomerResponse",
            "fields": [
              {
                "name": "id",
                "type": "UUID",
                "required": true,
                "description": null
              },
              {
                "name": "email",
                "type": "string",
                "required": true,
                "description": null
              },
              {
                "name": "full_name",
                "type": "string",
                "required": true,
                "description": null
              },
              {
                "name": "registration_date",
                "type": "datetime",
                "required": true,
                "description": null
              }
            ]
          },
          "auth_required": false,
          "tags": [
            "customers"
          ],
          "inferred": false,
          "inference_source": "spec",
          "inference_reason": null
        },
        {
          "path": "/carts",
          "method": "POST",
          "operation_id": "create_cart",
          "summary": "Create a cart",
          "description": "Creates an OPEN cart for a customer. If an OPEN cart already exists, it is reused instead of creating a new one.",
          "parameters": [],
          "request_schema": {
            "name": "CartCreate",
            "fields": [
              {
                "name": "customer_id",
                "type": "UUID",
                "required": true,
                "description": null
              }
            ]
          },
          "response_schema": {
            "name": "CartResponse",
            "fields": [
              {
                "name": "id",
                "type": "UUID",
                "required": true,
                "description": null
              },
              {
                "name": "customer_id",
                "type": "UUID",
                "required": true,
                "description": null
              },
              {
                "name": "status",
                "type": "string",
                "required": true,
                "description": null
              },
              {
                "name": "items",
                "type": "array",
                "required": true,
                "description": null
              }
            ]
          },
          "auth_required": false,
          "tags": [
            "carts"
          ],
          "inferred": false,
          "inference_source": "spec",
          "inference_reason": null
        },
        {
          "path": "/carts/{cart_id}",
          "method": "GET",
          "operation_id": "get_cart",
          "summary": "Get current cart",
          "description": "Returns the OPEN cart for a customer with all items and subtotals",
          "parameters": [
            {
              "name": "cart_id",
              "location": "path",
              "data_type": "UUID",
              "required": true,
              "description": "Cart ID"
            }
          ],
          "request_schema": null,
          "response_schema": {
            "name": "CartResponse",
            "fields": [
              {
                "name": "id",
                "type": "UUID",
                "required": true,
                "description": null
              },
              {
                "name": "customer_id",
                "type": "UUID",
                "required": true,
                "description": null
              },
              {
                "name": "status",
                "type": "string",
                "required": true,
                "description": null
              },
              {
                "name": "items",
                "type": "array",
                "required": true,
                "description": null
              }
            ]
          },
          "auth_required": false,
          "tags": [
            "carts"
          ],
          "inferred": false,
          "inference_source": "spec",
          "inference_reason": null
        },
        {
          "path": "/carts/{cart_id}/items",
          "method": "POST",
          "operation_id": "add_item_to_cart",
          "summary": "Add item to cart",
          "description": "Adds a specific product with quantity to the cart. Validates: product is active, sufficient stock, if product already in cart then increase quantity instead of duplicating, captures current price as unit_price",
          "parameters": [
            {
              "name": "cart_id",
              "location": "path",
              "data_type": "UUID",
              "required": true,
              "description": "Cart ID"
            }
          ],
          "request_schema": {
            "name": "AddCartItem",
            "fields": [
              {
                "name": "product_id",
                "type": "UUID",
                "required": true,
                "description": null
              },
              {
                "name": "quantity",
                "type": "integer",
                "required": true,
                "description": null
              }
            ]
          },
          "response_schema": {
            "name": "CartResponse",
            "fields": [
              {
                "name": "id",
                "type": "UUID",
                "required": true,
                "description": null
              },
              {
                "name": "customer_id",
                "type": "UUID",
                "required": true,
                "description": null
              },
              {
                "name": "status",
                "type": "string",
                "required": true,
                "description": null
              },
              {
                "name": "items",
                "type": "array",
                "required": true,
                "description": null
              }
            ]
          },
          "auth_required": false,
          "tags": [
            "carts"
          ],
          "inferred": false,
          "inference_source": "spec",
          "inference_reason": null
        },
        {
          "path": "/carts/{cart_id}/items/{item_id}",
          "method": "PATCH",
          "operation_id": "update_cart_item_quantity",
          "summary": "Update item quantity",
          "description": "Changes the quantity of a product in the cart. If quantity <= 0, removes the item. If quantity > available stock, returns 400 error.",
          "parameters": [
            {
              "name": "cart_id",
              "location": "path",
              "data_type": "UUID",
              "required": true,
              "description": "Cart ID"
            },
            {
              "name": "item_id",
              "location": "path",
              "data_type": "UUID",
              "required": true,
              "description": "Cart Item ID"
            }
          ],
          "request_schema": {
            "name": "UpdateCartItemQuantity",
            "fields": [
              {
                "name": "quantity",
                "type": "integer",
                "required": true,
                "description": null
              }
            ]
          },
          "response_schema": {
            "name": "CartResponse",
            "fields": [
              {
                "name": "id",
                "type": "UUID",
                "required": true,
                "description": null
              },
              {
                "name": "customer_id",
                "type": "UUID",
                "required": true,
                "description": null
              },
              {
                "name": "status",
                "type": "string",
                "required": true,
                "description": null
              },
              {
                "name": "items",
                "type": "array",
                "required": true,
                "description": null
              }
            ]
          },
          "auth_required": false,
          "tags": [
            "carts"
          ],
          "inferred": false,
          "inference_source": "spec",
          "inference_reason": null
        },
        {
          "path": "/carts/{cart_id}/clear",
          "method": "POST",
          "operation_id": "clear_cart",
          "summary": "Clear cart",
          "description": "Removes all items from the OPEN cart",
          "parameters": [
            {
              "name": "cart_id",
              "location": "path",
              "data_type": "UUID",
              "required": true,
              "description": "Cart ID"
            }
          ],
          "request_schema": null,
          "response_schema": {
            "name": "CartResponse",
            "fields": [
              {
                "name": "id",
                "type": "UUID",
                "required": true,
                "description": null
              },
              {
                "name": "customer_id",
                "type": "UUID",
                "required": true,
                "description": null
              },
              {
                "name": "status",
                "type": "string",
                "required": true,
                "description": null
              },
              {
                "name": "items",
                "type": "array",
                "required": true,
                "description": null
              }
            ]
          },
          "auth_required": false,
          "tags": [
            "carts"
          ],
          "inferred": false,
          "inference_source": "spec",
          "inference_reason": null
        },
        {
          "path": "/orders",
          "method": "POST",
          "operation_id": "checkout",
          "summary": "Checkout (create order)",
          "description": "Customer completes purchase. System: validates cart not empty, validates stock for ALL items, deducts stock from products, creates order with status PENDING_PAYMENT, marks cart as CHECKED_OUT, calculates total amount automatically",
          "parameters": [],
          "request_schema": {
            "name": "CheckoutRequest",
            "fields": [
              {
                "name": "cart_id",
                "type": "UUID",
                "required": true,
                "description": null
              }
            ]
          },
          "response_schema": {
            "name": "OrderResponse",
            "fields": [
              {
                "name": "id",
                "type": "UUID",
                "required": true,
                "description": null
              },
              {
                "name": "customer_id",
                "type": "UUID",
                "required": true,
                "description": null
              },
              {
                "name": "order_status",
                "type": "string",
                "required": true,
                "description": null
              },
              {
                "name": "payment_status",
                "type": "string",
                "required": true,
                "description": null
              },
              {
                "name": "total_amount",
                "type": "float",
                "required": true,
                "description": null
              },
              {
                "name": "created_at",
                "type": "datetime",
                "required": true,
                "description": null
              },
              {
                "name": "items",
                "type": "array",
                "required": true,
                "description": null
              }
            ]
          },
          "auth_required": false,
          "tags": [
            "orders"
          ],
          "inferred": false,
          "inference_source": "spec",
          "inference_reason": null
        },
        {
          "path": "/orders/{order_id}/pay",
          "method": "POST",
          "operation_id": "pay_order",
          "summary": "Pay order (simulated)",
          "description": "Marks an order as paid. Current status must be PENDING_PAYMENT. Changes to PAID + payment_status to SIMULATED_OK. Only allowed if order is awaiting payment.",
          "parameters": [
            {
              "name": "order_id",
              "location": "path",
              "data_type": "UUID",
              "required": true,
              "description": "Order ID"
            }
          ],
          "request_schema": null,
          "response_schema": {
            "name": "OrderResponse",
            "fields": [
              {
                "name": "id",
                "type": "UUID",
                "required": true,
                "description": null
              },
              {
                "name": "customer_id",
                "type": "UUID",
                "required": true,
                "description": null
              },
              {
                "name": "order_status",
                "type": "string",
                "required": true,
                "description": null
              },
              {
                "name": "payment_status",
                "type": "string",
                "required": true,
                "description": null
              },
              {
                "name": "total_amount",
                "type": "float",
                "required": true,
                "description": null
              },
              {
                "name": "created_at",
                "type": "datetime",
                "required": true,
                "description": null
              },
              {
                "name": "items",
                "type": "array",
                "required": true,
                "description": null
              }
            ]
          },
          "auth_required": false,
          "tags": [
            "orders"
          ],
          "inferred": false,
          "inference_source": "spec",
          "inference_reason": null
        },
        {
          "path": "/orders/{order_id}/cancel",
          "method": "POST",
          "operation_id": "cancel_order",
          "summary": "Cancel order",
          "description": "Cancels an order and returns stock. Current status must be PENDING_PAYMENT. Changes to CANCELLED. Adds quantity back to products.",
          "parameters": [
            {
              "name": "order_id",
              "location": "path",
              "data_type": "UUID",
              "required": true,
              "description": "Order ID"
            }
          ],
          "request_schema": null,
          "response_schema": {
            "name": "OrderResponse",
            "fields": [
              {
                "name": "id",
                "type": "UUID",
                "required": true,
                "description": null
              },
              {
                "name": "customer_id",
                "type": "UUID",
                "required": true,
                "description": null
              },
              {
                "name": "order_status",
                "type": "string",
                "required": true,
                "description": null
              },
              {
                "name": "payment_status",
                "type": "string",
                "required": true,
                "description": null
              },
              {
                "name": "total_amount",
                "type": "float",
                "required": true,
                "description": null
              },
              {
                "name": "created_at",
                "type": "datetime",
                "required": true,
                "description": null
              },
              {
                "name": "items",
                "type": "array",
                "required": true,
                "description": null
              }
            ]
          },
          "auth_required": false,
          "tags": [
            "orders"
          ],
          "inferred": false,
          "inference_source": "spec",
          "inference_reason": null
        },
        {
          "path": "/orders/{order_id}",
          "method": "GET",
          "operation_id": "get_order",
          "summary": "Get order details",
          "description": "Returns all information for an order by ID. Returns 404 if not found.",
          "parameters": [
            {
              "name": "order_id",
              "location": "path",
              "data_type": "UUID",
              "required": true,
              "description": "Order ID"
            }
          ],
          "request_schema": null,
          "response_schema": {
            "name": "OrderResponse",
            "fields": [
              {
                "name": "id",
                "type": "UUID",
                "required": true,
                "description": null
              },
              {
                "name": "customer_id",
                "type": "UUID",
                "required": true,
                "description": null
              },
              {
                "name": "order_status",
                "type": "string",
                "required": true,
                "description": null
              },
              {
                "name": "payment_status",
                "type": "string",
                "required": true,
                "description": null
              },
              {
                "name": "total_amount",
                "type": "float",
                "required": true,
                "description": null
              },
              {
                "name": "created_at",
                "type": "datetime",
                "required": true,
                "description": null
              },
              {
                "name": "items",
                "type": "array",
                "required": true,
                "description": null
              }
            ]
          },
          "auth_required": false,
          "tags": [
            "orders"
          ],
          "inferred": false,
          "inference_source": "spec",
          "inference_reason": null
        },
        {
          "path": "/customers/{customer_id}/orders",
          "method": "GET",
          "operation_id": "list_customer_orders",
          "summary": "List customer orders",
          "description": "Returns all orders for a customer, optionally filtered by status",
          "parameters": [
            {
              "name": "customer_id",
              "location": "path",
              "data_type": "UUID",
              "required": true,
              "description": "Customer ID"
            },
            {
              "name": "status",
              "location": "query",
              "data_type": "string",
              "required": false,
              "description": "Filter by order status (PENDING_PAYMENT, PAID, CANCELLED)"
            }
          ],
          "request_schema": null,
          "response_schema": {
            "name": "OrderListResponse",
            "fields": [
              {
                "name": "items",
                "type": "array",
                "required": true,
                "description": null
              },
              {
                "name": "total",
                "type": "integer",
                "required": true,
                "description": null
              }
            ]
          },
          "auth_required": false,
          "tags": [
            "orders"
          ],
          "inferred": false,
          "inference_source": "spec",
          "inference_reason": null
        },
        {
          "path": "/customers",
          "method": "GET",
          "operation_id": "list_customers",
          "summary": "List all customers",
          "description": "Retrieve a list of all customers (inferred best practice)",
          "parameters": [],
          "request_schema": null,
          "response_schema": null,
          "auth_required": true,
          "tags": [
            "customers"
          ],
          "inferred": true,
          "inference_source": "crud_best_practice",
          "inference_reason": "CRUD best practice: list endpoint for customers"
        },
        {
          "path": "/carts",
          "method": "GET",
          "operation_id": "list_carts",
          "summary": "List all carts",
          "description": "Retrieve a list of all carts (inferred best practice)",
          "parameters": [],
          "request_schema": null,
          "response_schema": null,
          "auth_required": true,
          "tags": [
            "carts"
          ],
          "inferred": true,
          "inference_source": "crud_best_practice",
          "inference_reason": "CRUD best practice: list endpoint for carts"
        },
        {
          "path": "/orders",
          "method": "GET",
          "operation_id": "list_orders",
          "summary": "List all orders",
          "description": "Retrieve a list of all orders (inferred best practice)",
          "parameters": [],
          "request_schema": null,
          "response_schema": null,
          "auth_required": true,
          "tags": [
            "orders"
          ],
          "inferred": true,
          "inference_source": "crud_best_practice",
          "inference_reason": "CRUD best practice: list endpoint for orders"
        },
        {
          "path": "/customers/{id}",
          "method": "DELETE",
          "operation_id": "delete_customer",
          "summary": "Delete a customer",
          "description": "Delete a specific customer by ID (inferred best practice)",
          "parameters": [
            {
              "name": "id",
              "location": "path",
              "data_type": "string",
              "required": true,
              "description": "The customer ID"
            }
          ],
          "request_schema": null,
          "response_schema": null,
          "auth_required": true,
          "tags": [
            "customers"
          ],
          "inferred": true,
          "inference_source": "crud_best_practice",
          "inference_reason": "CRUD best practice: delete endpoint for customer"
        },
        {
          "path": "/carts/{id}",
          "method": "DELETE",
          "operation_id": "delete_cart",
          "summary": "Delete a cart",
          "description": "Delete a specific cart by ID (inferred best practice)",
          "parameters": [
            {
              "name": "id",
              "location": "path",
              "data_type": "string",
              "required": true,
              "description": "The cart ID"
            }
          ],
          "request_schema": null,
          "response_schema": null,
          "auth_required": true,
          "tags": [
            "carts"
          ],
          "inferred": true,
          "inference_source": "crud_best_practice",
          "inference_reason": "CRUD best practice: delete endpoint for cart"
        },
        {
          "path": "/orders/{id}",
          "method": "DELETE",
          "operation_id": "delete_order",
          "summary": "Delete a order",
          "description": "Delete a specific order by ID (inferred best practice)",
          "parameters": [
            {
              "name": "id",
              "location": "path",
              "data_type": "string",
              "required": true,
              "description": "The order ID"
            }
          ],
          "request_schema": null,
          "response_schema": null,
          "auth_required": true,
          "tags": [
            "orders"
          ],
          "inferred": true,
          "inference_source": "crud_best_practice",
          "inference_reason": "CRUD best practice: delete endpoint for order"
        },
        {
          "path": "/products/{id}",
          "method": "DELETE",
          "operation_id": "delete_product",
          "summary": "Delete a product",
          "description": "Delete a specific product by ID (inferred best practice)",
          "parameters": [
            {
              "name": "id",
              "location": "path",
              "data_type": "string",
              "required": true,
              "description": "The product ID"
            }
          ],
          "request_schema": null,
          "response_schema": null,
          "auth_required": true,
          "tags": [
            "products"
          ],
          "inferred": true,
          "inference_source": "crud_best_practice",
          "inference_reason": "CRUD best practice: delete endpoint for product"
        },
        {
          "path": "/products/{id}/deactivate",
          "method": "PATCH",
          "operation_id": "deactivate_product",
          "summary": "Deactivate Product",
          "description": "Custom operation: f5: deactivate product (inferred from flow)",
          "parameters": [
            {
              "name": "id",
              "location": "path",
              "data_type": "string",
              "required": true,
              "description": "The product ID"
            }
          ],
          "request_schema": null,
          "response_schema": null,
          "auth_required": true,
          "tags": [
            "products"
          ],
          "inferred": true,
          "inference_source": "spec",
          "inference_reason": "Custom operation from flow: F5: Deactivate Product"
        },
        {
          "path": "/products/{id}/activate",
          "method": "PATCH",
          "operation_id": "activate_product",
          "summary": "Activate Product",
          "description": "Custom operation: f5: deactivate product (inferred from flow)",
          "parameters": [
            {
              "name": "id",
              "location": "path",
              "data_type": "string",
              "required": true,
              "description": "The product ID"
            }
          ],
          "request_schema": null,
          "response_schema": null,
          "auth_required": true,
          "tags": [
            "products"
          ],
          "inferred": true,
          "inference_source": "spec",
          "inference_reason": "Custom operation from flow: F5: Deactivate Product"
        },
        {
          "path": "/carts/{id}/checkout",
          "method": "POST",
          "operation_id": "checkout_cart",
          "summary": "Checkout Cart",
          "description": "Custom operation: f13: checkout (create order) (inferred from flow)",
          "parameters": [
            {
              "name": "id",
              "location": "path",
              "data_type": "string",
              "required": true,
              "description": "The cart ID"
            }
          ],
          "request_schema": null,
          "response_schema": null,
          "auth_required": true,
          "tags": [
            "carts"
          ],
          "inferred": true,
          "inference_source": "spec",
          "inference_reason": "Custom operation from flow: F13: Checkout (Create Order)"
        },
        {
          "path": "/cartitems/{id}/checkout",
          "method": "POST",
          "operation_id": "checkout_cartitem",
          "summary": "Checkout CartItem",
          "description": "Custom operation: f13: checkout (create order) (inferred from flow)",
          "parameters": [
            {
              "name": "id",
              "location": "path",
              "data_type": "string",
              "required": true,
              "description": "The cartitem ID"
            }
          ],
          "request_schema": null,
          "response_schema": null,
          "auth_required": true,
          "tags": [
            "cartitems"
          ],
          "inferred": true,
          "inference_source": "spec",
          "inference_reason": "Custom operation from flow: F13: Checkout (Create Order)"
        },
        {
          "path": "/orders/{id}/checkout",
          "method": "POST",
          "operation_id": "checkout_order",
          "summary": "Checkout Order",
          "description": "Custom operation: f13: checkout (create order) (inferred from flow)",
          "parameters": [
            {
              "name": "id",
              "location": "path",
              "data_type": "string",
              "required": true,
              "description": "The order ID"
            }
          ],
          "request_schema": null,
          "response_schema": null,
          "auth_required": true,
          "tags": [
            "orders"
          ],
          "inferred": true,
          "inference_source": "spec",
          "inference_reason": "Custom operation from flow: F13: Checkout (Create Order)"
        },
        {
          "path": "/orderitems/{id}/checkout",
          "method": "POST",
          "operation_id": "checkout_orderitem",
          "summary": "Checkout OrderItem",
          "description": "Custom operation: f13: checkout (create order) (inferred from flow)",
          "parameters": [
            {
              "name": "id",
              "location": "path",
              "data_type": "string",
              "required": true,
              "description": "The orderitem ID"
            }
          ],
          "request_schema": null,
          "response_schema": null,
          "auth_required": true,
          "tags": [
            "orderitems"
          ],
          "inferred": true,
          "inference_source": "spec",
          "inference_reason": "Custom operation from flow: F13: Checkout (Create Order)"
        },
        {
          "path": "/products/{id}/checkout",
          "method": "POST",
          "operation_id": "checkout_product",
          "summary": "Checkout Product",
          "description": "Custom operation: f13: checkout (create order) (inferred from flow)",
          "parameters": [
            {
              "name": "id",
              "location": "path",
              "data_type": "string",
              "required": true,
              "description": "The product ID"
            }
          ],
          "request_schema": null,
          "response_schema": null,
          "auth_required": true,
          "tags": [
            "products"
          ],
          "inferred": true,
          "inference_source": "spec",
          "inference_reason": "Custom operation from flow: F13: Checkout (Create Order)"
        },
        {
          "path": "/carts/{id}/pay",
          "method": "POST",
          "operation_id": "pay_cart",
          "summary": "Pay Cart",
          "description": "Custom operation: f13: checkout (create order) (inferred from flow)",
          "parameters": [
            {
              "name": "id",
              "location": "path",
              "data_type": "string",
              "required": true,
              "description": "The cart ID"
            }
          ],
          "request_schema": null,
          "response_schema": null,
          "auth_required": true,
          "tags": [
            "carts"
          ],
          "inferred": true,
          "inference_source": "spec",
          "inference_reason": "Custom operation from flow: F13: Checkout (Create Order)"
        },
        {
          "path": "/cartitems/{id}/pay",
          "method": "POST",
          "operation_id": "pay_cartitem",
          "summary": "Pay CartItem",
          "description": "Custom operation: f13: checkout (create order) (inferred from flow)",
          "parameters": [
            {
              "name": "id",
              "location": "path",
              "data_type": "string",
              "required": true,
              "description": "The cartitem ID"
            }
          ],
          "request_schema": null,
          "response_schema": null,
          "auth_required": true,
          "tags": [
            "cartitems"
          ],
          "inferred": true,
          "inference_source": "spec",
          "inference_reason": "Custom operation from flow: F13: Checkout (Create Order)"
        },
        {
          "path": "/orderitems/{id}/pay",
          "method": "POST",
          "operation_id": "pay_orderitem",
          "summary": "Pay OrderItem",
          "description": "Custom operation: f13: checkout (create order) (inferred from flow)",
          "parameters": [
            {
              "name": "id",
              "location": "path",
              "data_type": "string",
              "required": true,
              "description": "The orderitem ID"
            }
          ],
          "request_schema": null,
          "response_schema": null,
          "auth_required": true,
          "tags": [
            "orderitems"
          ],
          "inferred": true,
          "inference_source": "spec",
          "inference_reason": "Custom operation from flow: F13: Checkout (Create Order)"
        },
        {
          "path": "/products/{id}/pay",
          "method": "POST",
          "operation_id": "pay_product",
          "summary": "Pay Product",
          "description": "Custom operation: f13: checkout (create order) (inferred from flow)",
          "parameters": [
            {
              "name": "id",
              "location": "path",
              "data_type": "string",
              "required": true,
              "description": "The product ID"
            }
          ],
          "request_schema": null,
          "response_schema": null,
          "auth_required": true,
          "tags": [
            "products"
          ],
          "inferred": true,
          "inference_source": "spec",
          "inference_reason": "Custom operation from flow: F13: Checkout (Create Order)"
        },
        {
          "path": "/orderitems/{id}/cancel",
          "method": "POST",
          "operation_id": "cancel_orderitem",
          "summary": "Cancel OrderItem",
          "description": "Custom operation: f15: cancel order (inferred from flow)",
          "parameters": [
            {
              "name": "id",
              "location": "path",
              "data_type": "string",
              "required": true,
              "description": "The orderitem ID"
            }
          ],
          "request_schema": null,
          "response_schema": null,
          "auth_required": true,
          "tags": [
            "orderitems"
          ],
          "inferred": true,
          "inference_source": "spec",
          "inference_reason": "Custom operation from flow: F15: Cancel Order"
        },
        {
          "path": "/products/{id}/cancel",
          "method": "POST",
          "operation_id": "cancel_product",
          "summary": "Cancel Product",
          "description": "Custom operation: f15: cancel order (inferred from flow)",
          "parameters": [
            {
              "name": "id",
              "location": "path",
              "data_type": "string",
              "required": true,
              "description": "The product ID"
            }
          ],
          "request_schema": null,
          "response_schema": null,
          "auth_required": true,
          "tags": [
            "products"
          ],
          "inferred": true,
          "inference_source": "spec",
          "inference_reason": "Custom operation from flow: F15: Cancel Order"
        },
        {
          "path": "/carts/{id}/items/{product_id}}",
          "method": "PUT",
          "operation_id": "add_item_to_cart",
          "summary": "Add item to cart",
          "description": "Add/update item in cart (nested resource)",
          "parameters": [
            {
              "name": "id",
              "location": "path",
              "data_type": "string",
              "required": true,
              "description": "The cart ID"
            },
            {
              "name": "product_id",
              "location": "path",
              "data_type": "string",
              "required": true,
              "description": "The item ID"
            }
          ],
          "request_schema": null,
          "response_schema": null,
          "auth_required": true,
          "tags": [
            "carts"
          ],
          "inferred": true,
          "inference_source": "crud_best_practice",
          "inference_reason": "Nested resource endpoint for CartItem"
        },
        {
          "path": "/carts/{id}/items/{product_id}}",
          "method": "DELETE",
          "operation_id": "remove_item_from_cart",
          "summary": "Remove item from cart",
          "description": "Remove item from cart (nested resource)",
          "parameters": [
            {
              "name": "id",
              "location": "path",
              "data_type": "string",
              "required": true,
              "description": "The cart ID"
            },
            {
              "name": "product_id",
              "location": "path",
              "data_type": "string",
              "required": true,
              "description": "The item ID"
            }
          ],
          "request_schema": null,
          "response_schema": null,
          "auth_required": true,
          "tags": [
            "carts"
          ],
          "inferred": true,
          "inference_source": "crud_best_practice",
          "inference_reason": "Nested resource endpoint for CartItem"
        },
        {
          "path": "/orders/{id}/items/{product_id}}",
          "method": "PUT",
          "operation_id": "add_item_to_order",
          "summary": "Add item to order",
          "description": "Add/update item in order (nested resource)",
          "parameters": [
            {
              "name": "id",
              "location": "path",
              "data_type": "string",
              "required": true,
              "description": "The order ID"
            },
            {
              "name": "product_id",
              "location": "path",
              "data_type": "string",
              "required": true,
              "description": "The item ID"
            }
          ],
          "request_schema": null,
          "response_schema": null,
          "auth_required": true,
          "tags": [
            "orders"
          ],
          "inferred": true,
          "inference_source": "crud_best_practice",
          "inference_reason": "Nested resource endpoint for OrderItem"
        },
        {
          "path": "/orders/{id}/items/{product_id}}",
          "method": "DELETE",
          "operation_id": "remove_item_from_order",
          "summary": "Remove item from order",
          "description": "Remove item from order (nested resource)",
          "parameters": [
            {
              "name": "id",
              "location": "path",
              "data_type": "string",
              "required": true,
              "description": "The order ID"
            },
            {
              "name": "product_id",
              "location": "path",
              "data_type": "string",
              "required": true,
              "description": "The item ID"
            }
          ],
          "request_schema": null,
          "response_schema": null,
          "auth_required": true,
          "tags": [
            "orders"
          ],
          "inferred": true,
          "inference_source": "crud_best_practice",
          "inference_reason": "Nested resource endpoint for OrderItem"
        },
        {
          "path": "/health",
          "method": "GET",
          "operation_id": "health_check",
          "summary": "Basic health check",
          "description": "Basic health check (inferred infrastructure best practice)",
          "parameters": [],
          "request_schema": null,
          "response_schema": null,
          "auth_required": false,
          "tags": [
            "health"
          ],
          "inferred": true,
          "inference_source": "infra_best_practice",
          "inference_reason": "Infrastructure best practice: health endpoints"
        },
        {
          "path": "/health/ready",
          "method": "GET",
          "operation_id": "readiness_check",
          "summary": "Readiness check with dependencies",
          "description": "Readiness check with dependencies (inferred infrastructure best practice)",
          "parameters": [],
          "request_schema": null,
          "response_schema": null,
          "auth_required": false,
          "tags": [
            "health"
          ],
          "inferred": true,
          "inference_source": "infra_best_practice",
          "inference_reason": "Infrastructure best practice: health endpoints"
        },
        {
          "path": "/metrics",
          "method": "GET",
          "operation_id": "get_metrics",
          "summary": "Prometheus metrics",
          "description": "Prometheus-compatible metrics endpoint (inferred infrastructure best practice)",
          "parameters": [],
          "request_schema": null,
          "response_schema": null,
          "auth_required": false,
          "tags": [
            "observability"
          ],
          "inferred": true,
          "inference_source": "infra_best_practice",
          "inference_reason": "Infrastructure best practice: metrics endpoint"
        }
      ],
      "schemas": [
        {
          "name": "HealthResponse",
          "fields": [
            {
              "name": "message",
              "type": "string",
              "required": true,
              "description": null
            },
            {
              "name": "status",
              "type": "string",
              "required": true,
              "description": null
            }
          ]
        },
        {
          "name": "ProductCreate",
          "fields": [
            {
              "name": "name",
              "type": "string",
              "required": true,
              "description": null
            },
            {
              "name": "description",
              "type": "string",
              "required": false,
              "description": null
            },
            {
              "name": "price",
              "type": "float",
              "required": true,
              "description": null
            },
            {
              "name": "stock",
              "type": "integer",
              "required": true,
              "description": null
            },
            {
              "name": "is_active",
              "type": "boolean",
              "required": false,
              "description": null
            }
          ]
        },
        {
          "name": "ProductResponse",
          "fields": [
            {
              "name": "id",
              "type": "UUID",
              "required": true,
              "description": null
            },
            {
              "name": "name",
              "type": "string",
              "required": true,
              "description": null
            },
            {
              "name": "description",
              "type": "string",
              "required": false,
              "description": null
            },
            {
              "name": "price",
              "type": "float",
              "required": true,
              "description": null
            },
            {
              "name": "stock",
              "type": "integer",
              "required": true,
              "description": null
            },
            {
              "name": "is_active",
              "type": "boolean",
              "required": true,
              "description": null
            }
          ]
        },
        {
          "name": "ProductListResponse",
          "fields": [
            {
              "name": "items",
              "type": "array",
              "required": true,
              "description": null
            },
            {
              "name": "total",
              "type": "integer",
              "required": true,
              "description": null
            },
            {
              "name": "skip",
              "type": "integer",
              "required": true,
              "description": null
            },
            {
              "name": "limit",
              "type": "integer",
              "required": true,
              "description": null
            }
          ]
        },
        {
          "name": "ProductResponse",
          "fields": [
            {
              "name": "id",
              "type": "UUID",
              "required": true,
              "description": null
            },
            {
              "name": "name",
              "type": "string",
              "required": true,
              "description": null
            },
            {
              "name": "description",
              "type": "string",
              "required": false,
              "description": null
            },
            {
              "name": "price",
              "type": "float",
              "required": true,
              "description": null
            },
            {
              "name": "stock",
              "type": "integer",
              "required": true,
              "description": null
            },
            {
              "name": "is_active",
              "type": "boolean",
              "required": true,
              "description": null
            }
          ]
        },
        {
          "name": "ProductUpdate",
          "fields": [
            {
              "name": "name",
              "type": "string",
              "required": false,
              "description": null
            },
            {
              "name": "description",
              "type": "string",
              "required": false,
              "description": null
            },
            {
              "name": "price",
              "type": "float",
              "required": false,
              "description": null
            },
            {
              "name": "stock",
              "type": "integer",
              "required": false,
              "description": null
            },
            {
              "name": "is_active",
              "type": "boolean",
              "required": false,
              "description": null
            }
          ]
        },
        {
          "name": "ProductResponse",
          "fields": [
            {
              "name": "id",
              "type": "UUID",
              "required": true,
              "description": null
            },
            {
              "name": "name",
              "type": "string",
              "required": true,
              "description": null
            },
            {
              "name": "description",
              "type": "string",
              "required": false,
              "description": null
            },
            {
              "name": "price",
              "type": "float",
              "required": true,
              "description": null
            },
            {
              "name": "stock",
              "type": "integer",
              "required": true,
              "description": null
            },
            {
              "name": "is_active",
              "type": "boolean",
              "required": true,
              "description": null
            }
          ]
        },
        {
          "name": "ProductResponse",
          "fields": [
            {
              "name": "id",
              "type": "UUID",
              "required": true,
              "description": null
            },
            {
              "name": "name",
              "type": "string",
              "required": true,
              "description": null
            },
            {
              "name": "description",
              "type": "string",
              "required": false,
              "description": null
            },
            {
              "name": "price",
              "type": "float",
              "required": true,
              "description": null
            },
            {
              "name": "stock",
              "type": "integer",
              "required": true,
              "description": null
            },
            {
              "name": "is_active",
              "type": "boolean",
              "required": true,
              "description": null
            }
          ]
        },
        {
          "name": "CustomerCreate",
          "fields": [
            {
              "name": "email",
              "type": "string",
              "required": true,
              "description": null
            },
            {
              "name": "full_name",
              "type": "string",
              "required": true,
              "description": null
            }
          ]
        },
        {
          "name": "CustomerResponse",
          "fields": [
            {
              "name": "id",
              "type": "UUID",
              "required": true,
              "description": null
            },
            {
              "name": "email",
              "type": "string",
              "required": true,
              "description": null
            },
            {
              "name": "full_name",
              "type": "string",
              "required": true,
              "description": null
            },
            {
              "name": "registration_date",
              "type": "datetime",
              "required": true,
              "description": null
            }
          ]
        },
        {
          "name": "CustomerResponse",
          "fields": [
            {
              "name": "id",
              "type": "UUID",
              "required": true,
              "description": null
            },
            {
              "name": "email",
              "type": "string",
              "required": true,
              "description": null
            },
            {
              "name": "full_name",
              "type": "string",
              "required": true,
              "description": null
            },
            {
              "name": "registration_date",
              "type": "datetime",
              "required": true,
              "description": null
            }
          ]
        },
        {
          "name": "CartCreate",
          "fields": [
            {
              "name": "customer_id",
              "type": "UUID",
              "required": true,
              "description": null
            }
          ]
        },
        {
          "name": "CartResponse",
          "fields": [
            {
              "name": "id",
              "type": "UUID",
              "required": true,
              "description": null
            },
            {
              "name": "customer_id",
              "type": "UUID",
              "required": true,
              "description": null
            },
            {
              "name": "status",
              "type": "string",
              "required": true,
              "description": null
            },
            {
              "name": "items",
              "type": "array",
              "required": true,
              "description": null
            }
          ]
        },
        {
          "name": "CartResponse",
          "fields": [
            {
              "name": "id",
              "type": "UUID",
              "required": true,
              "description": null
            },
            {
              "name": "customer_id",
              "type": "UUID",
              "required": true,
              "description": null
            },
            {
              "name": "status",
              "type": "string",
              "required": true,
              "description": null
            },
            {
              "name": "items",
              "type": "array",
              "required": true,
              "description": null
            }
          ]
        },
        {
          "name": "AddCartItem",
          "fields": [
            {
              "name": "product_id",
              "type": "UUID",
              "required": true,
              "description": null
            },
            {
              "name": "quantity",
              "type": "integer",
              "required": true,
              "description": null
            }
          ]
        },
        {
          "name": "CartResponse",
          "fields": [
            {
              "name": "id",
              "type": "UUID",
              "required": true,
              "description": null
            },
            {
              "name": "customer_id",
              "type": "UUID",
              "required": true,
              "description": null
            },
            {
              "name": "status",
              "type": "string",
              "required": true,
              "description": null
            },
            {
              "name": "items",
              "type": "array",
              "required": true,
              "description": null
            }
          ]
        },
        {
          "name": "UpdateCartItemQuantity",
          "fields": [
            {
              "name": "quantity",
              "type": "integer",
              "required": true,
              "description": null
            }
          ]
        },
        {
          "name": "CartResponse",
          "fields": [
            {
              "name": "id",
              "type": "UUID",
              "required": true,
              "description": null
            },
            {
              "name": "customer_id",
              "type": "UUID",
              "required": true,
              "description": null
            },
            {
              "name": "status",
              "type": "string",
              "required": true,
              "description": null
            },
            {
              "name": "items",
              "type": "array",
              "required": true,
              "description": null
            }
          ]
        },
        {
          "name": "CartResponse",
          "fields": [
            {
              "name": "id",
              "type": "UUID",
              "required": true,
              "description": null
            },
            {
              "name": "customer_id",
              "type": "UUID",
              "required": true,
              "description": null
            },
            {
              "name": "status",
              "type": "string",
              "required": true,
              "description": null
            },
            {
              "name": "items",
              "type": "array",
              "required": true,
              "description": null
            }
          ]
        },
        {
          "name": "CheckoutRequest",
          "fields": [
            {
              "name": "cart_id",
              "type": "UUID",
              "required": true,
              "description": null
            }
          ]
        },
        {
          "name": "OrderResponse",
          "fields": [
            {
              "name": "id",
              "type": "UUID",
              "required": true,
              "description": null
            },
            {
              "name": "customer_id",
              "type": "UUID",
              "required": true,
              "description": null
            },
            {
              "name": "order_status",
              "type": "string",
              "required": true,
              "description": null
            },
            {
              "name": "payment_status",
              "type": "string",
              "required": true,
              "description": null
            },
            {
              "name": "total_amount",
              "type": "float",
              "required": true,
              "description": null
            },
            {
              "name": "created_at",
              "type": "datetime",
              "required": true,
              "description": null
            },
            {
              "name": "items",
              "type": "array",
              "required": true,
              "description": null
            }
          ]
        },
        {
          "name": "OrderResponse",
          "fields": [
            {
              "name": "id",
              "type": "UUID",
              "required": true,
              "description": null
            },
            {
              "name": "customer_id",
              "type": "UUID",
              "required": true,
              "description": null
            },
            {
              "name": "order_status",
              "type": "string",
              "required": true,
              "description": null
            },
            {
              "name": "payment_status",
              "type": "string",
              "required": true,
              "description": null
            },
            {
              "name": "total_amount",
              "type": "float",
              "required": true,
              "description": null
            },
            {
              "name": "created_at",
              "type": "datetime",
              "required": true,
              "description": null
            },
            {
              "name": "items",
              "type": "array",
              "required": true,
              "description": null
            }
          ]
        },
        {
          "name": "OrderResponse",
          "fields": [
            {
              "name": "id",
              "type": "UUID",
              "required": true,
              "description": null
            },
            {
              "name": "customer_id",
              "type": "UUID",
              "required": true,
              "description": null
            },
            {
              "name": "order_status",
              "type": "string",
              "required": true,
              "description": null
            },
            {
              "name": "payment_status",
              "type": "string",
              "required": true,
              "description": null
            },
            {
              "name": "total_amount",
              "type": "float",
              "required": true,
              "description": null
            },
            {
              "name": "created_at",
              "type": "datetime",
              "required": true,
              "description": null
            },
            {
              "name": "items",
              "type": "array",
              "required": true,
              "description": null
            }
          ]
        },
        {
          "name": "OrderResponse",
          "fields": [
            {
              "name": "id",
              "type": "UUID",
              "required": true,
              "description": null
            },
            {
              "name": "customer_id",
              "type": "UUID",
              "required": true,
              "description": null
            },
            {
              "name": "order_status",
              "type": "string",
              "required": true,
              "description": null
            },
            {
              "name": "payment_status",
              "type": "string",
              "required": true,
              "description": null
            },
            {
              "name": "total_amount",
              "type": "float",
              "required": true,
              "description": null
            },
            {
              "name": "created_at",
              "type": "datetime",
              "required": true,
              "description": null
            },
            {
              "name": "items",
              "type": "array",
              "required": true,
              "description": null
            }
          ]
        },
        {
          "name": "OrderListResponse",
          "fields": [
            {
              "name": "items",
              "type": "array",
              "required": true,
              "description": null
            },
            {
              "name": "total",
              "type": "integer",
              "required": true,
              "description": null
            }
          ]
        }
      ],
      "base_path": "/api/v1",
      "version": "v1"
    },
    "infrastructure_model": {
      "database": {
        "type": "postgresql",
        "host": "localhost",
        "port": 5432,
        "name": "ecommerce_db",
        "user": "ecommerce_db_user",
        "password_env_var": "ECOMMERCE_DB_PASSWORD"
      },
      "vector_db": null,
      "graph_db": null,
      "containers": [],
      "observability": {
        "logging_enabled": true,
        "metrics_enabled": true,
        "tracing_enabled": true,
        "health_check_path": "/health"
      },
      "docker_compose_version": "3.8"
    },
    "behavior_model": {
      "flows": [
        {
          "name": "F1: Create Product",
          "type": "workflow",
          "trigger": "Admin creates a new product",
          "steps": [
            {
              "order": 1,
              "description": "Validate product data (name required, price > 0, stock >= 0)",
              "action": "validate",
              "target_entity": "Product",
              "condition": "name is not empty, price > 0, stock >= 0"
            },
            {
              "order": 2,
              "description": "Create product record",
              "action": "create",
              "target_entity": "Product",
              "condition": null
            }
          ],
          "description": "The system allows creating a new product with name, description, price, stock, and active status"
        },
        {
          "name": "F2: List Active Products",
          "type": "workflow",
          "trigger": "User requests list of products",
          "steps": [
            {
              "order": 1,
              "description": "Filter products where is_active = true",
              "action": "validate",
              "target_entity": "Product",
              "condition": "is_active = true"
            },
            {
              "order": 2,
              "description": "Apply pagination (skip, limit)",
              "action": "calculate",
              "target_entity": "Product",
              "condition": null
            },
            {
              "order": 3,
              "description": "Return paginated list",
              "action": "validate",
              "target_entity": "Product",
              "condition": null
            }
          ],
          "description": "Users can obtain a list of all available products (is_active = true), with pagination"
        },
        {
          "name": "F3: View Product Details",
          "type": "workflow",
          "trigger": "User requests product details by ID",
          "steps": [
            {
              "order": 1,
              "description": "Validate product exists",
              "action": "validate",
              "target_entity": "Product",
              "condition": "product with given ID exists"
            },
            {
              "order": 2,
              "description": "Return product details",
              "action": "validate",
              "target_entity": "Product",
              "condition": null
            }
          ],
          "description": "Obtain all information for a specific product by ID. Returns 404 if not found."
        },
        {
          "name": "F4: Update Product",
          "type": "workflow",
          "trigger": "Admin updates product information",
          "steps": [
            {
              "order": 1,
              "description": "Validate product exists",
              "action": "validate",
              "target_entity": "Product",
              "condition": "product with given ID exists"
            },
            {
              "order": 2,
              "description": "Validate updated data (price > 0, stock >= 0)",
              "action": "validate",
              "target_entity": "Product",
              "condition": "if price provided, price > 0; if stock provided, stock >= 0"
            },
            {
              "order": 3,
              "description": "Update product record",
              "action": "update",
              "target_entity": "Product",
              "condition": null
            }
          ],
          "description": "Change name, description, price, stock, or active status of an existing product"
        },
        {
          "name": "F5: Deactivate Product",
          "type": "state_transition",
          "trigger": "Admin deactivates a product",
          "steps": [
            {
              "order": 1,
              "description": "Validate product exists",
              "action": "validate",
              "target_entity": "Product",
              "condition": "product with given ID exists"
            },
            {
              "order": 2,
              "description": "Set is_active to false",
              "action": "update",
              "target_entity": "Product",
              "condition": null
            }
          ],
          "description": "Mark a product as inactive (is_active = false). Does not delete it, just hides it."
        },
        {
          "name": "F6: Register Customer",
          "type": "workflow",
          "trigger": "New customer registers",
          "steps": [
            {
              "order": 1,
              "description": "Validate email format",
              "action": "validate",
              "target_entity": "Customer",
              "condition": "email is valid format"
            },
            {
              "order": 2,
              "description": "Validate email is unique",
              "action": "validate",
              "target_entity": "Customer",
              "condition": "email does not already exist"
            },
            {
              "order": 3,
              "description": "Create customer record with registration date",
              "action": "create",
              "target_entity": "Customer",
              "condition": null
            }
          ],
          "description": "Create new customer account with email and full name. Returns 400 if email already exists."
        },
        {
          "name": "F7: View Customer Details",
          "type": "workflow",
          "trigger": "User requests customer details by ID",
          "steps": [
            {
              "order": 1,
              "description": "Validate customer exists",
              "action": "validate",
              "target_entity": "Customer",
              "condition": "customer with given ID exists"
            },
            {
              "order": 2,
              "description": "Return customer details",
              "action": "validate",
              "target_entity": "Customer",
              "condition": null
            }
          ],
          "description": "Obtain complete information for a customer by ID. Returns 404 if not found."
        },
        {
          "name": "F8: Create Cart",
          "type": "workflow",
          "trigger": "Customer creates a shopping cart",
          "steps": [
            {
              "order": 1,
              "description": "Validate customer exists",
              "action": "validate",
              "target_entity": "Customer",
              "condition": "customer with given ID exists"
            },
            {
              "order": 2,
              "description": "Check if customer already has an OPEN cart",
              "action": "validate",
              "target_entity": "Cart",
              "condition": "customer does not have existing OPEN cart"
            },
            {
              "order": 3,
              "description": "Create new cart with status OPEN or return existing OPEN cart",
              "action": "create",
              "target_entity": "Cart",
              "condition": null
            }
          ],
          "description": "The system creates an OPEN cart for a customer. If an OPEN cart already exists, it is reused."
        },
        {
          "name": "F9: Add Item to Cart",
          "type": "workflow",
          "trigger": "Customer adds a product to cart",
          "steps": [
            {
              "order": 1,
              "description": "Validate cart exists and is OPEN",
              "action": "validate",
              "target_entity": "Cart",
              "condition": "cart exists and status = OPEN"
            },
            {
              "order": 2,
              "description": "Validate product exists and is active",
              "action": "validate",
              "target_entity": "Product",
              "condition": "product exists and is_active = true"
            },
            {
              "order": 3,
              "description": "Validate sufficient stock",
              "action": "validate",
              "target_entity": "Product",
              "condition": "product.stock >= requested quantity"
            },
            {
              "order": 4,
              "description": "Check if product already in cart",
              "action": "validate",
              "target_entity": "CartItem",
              "condition": "product not already in cart"
            },
            {
              "order": 5,
              "description": "If product in cart, increase quantity; otherwise create new cart item with current price",
              "action": "create",
              "target_entity": "CartItem",
              "condition": null
            }
          ],
          "description": "Add a specific product with quantity to the cart. Validates: product is active, sufficient stock, if product already in cart then increase quantity instead of duplicating, captures current price as unit_price"
        },
        {
          "name": "F10: View Current Cart",
          "type": "workflow",
          "trigger": "Customer views their cart",
          "steps": [
            {
              "order": 1,
              "description": "Validate cart exists",
              "action": "validate",
              "target_entity": "Cart",
              "condition": "cart with given ID exists"
            },
            {
              "order": 2,
              "description": "Calculate subtotals for each item",
              "action": "calculate",
              "target_entity": "CartItem",
              "condition": null
            },
            {
              "order": 3,
              "description": "Return cart with items and totals",
              "action": "validate",
              "target_entity": "Cart",
              "condition": null
            }
          ],
          "description": "Obtain the OPEN cart for a customer with all items and subtotals"
        },
        {
          "name": "F11: Update Item Quantity",
          "type": "workflow",
          "trigger": "Customer changes quantity of a cart item",
          "steps": [
            {
              "order": 1,
              "description": "Validate cart and item exist",
              "action": "validate",
              "target_entity": "CartItem",
              "condition": "cart item exists in given cart"
            },
            {
              "order": 2,
              "description": "If quantity <= 0, delete item",
              "action": "delete",
              "target_entity": "CartItem",
              "condition": "quantity <= 0"
            },
            {
              "order": 3,
              "description": "If quantity > 0, validate sufficient stock",
              "action": "validate",
              "target_entity": "Product",
              "condition": "product.stock >= new quantity"
            },
            {
              "order": 4,
              "description": "Update item quantity",
              "action": "update",
              "target_entity": "CartItem",
              "condition": null
            }
          ],
          "description": "Change the quantity of a product in the cart. If quantity <= 0, remove the item. If quantity > available stock, return 400 error."
        },
        {
          "name": "F12: Clear Cart",
          "type": "workflow",
          "trigger": "Customer clears their cart",
          "steps": [
            {
              "order": 1,
              "description": "Validate cart exists and is OPEN",
              "action": "validate",
              "target_entity": "Cart",
              "condition": "cart exists and status = OPEN"
            },
            {
              "order": 2,
              "description": "Delete all cart items",
              "action": "delete",
              "target_entity": "CartItem",
              "condition": null
            }
          ],
          "description": "Remove all items from the OPEN cart"
        },
        {
          "name": "F13: Checkout (Create Order)",
          "type": "workflow",
          "trigger": "Customer completes purchase",
          "steps": [
            {
              "order": 1,
              "description": "Validate cart exists and is OPEN",
              "action": "validate",
              "target_entity": "Cart",
              "condition": "cart exists and status = OPEN"
            },
            {
              "order": 2,
              "description": "Validate cart is not empty",
              "action": "validate",
              "target_entity": "Cart",
              "condition": "cart has at least one item"
            },
            {
              "order": 3,
              "description": "Validate sufficient stock for all items",
              "action": "validate",
              "target_entity": "Product",
              "condition": "for each cart item, product.stock >= item.quantity"
            },
            {
              "order": 4,
              "description": "Deduct stock from products",
              "action": "update",
              "target_entity": "Product",
              "condition": null
            },
            {
              "order": 5,
              "description": "Create order with status PENDING_PAYMENT",
              "action": "create",
              "target_entity": "Order",
              "condition": null
            },
            {
              "order": 6,
              "description": "Copy cart items to order items",
              "action": "create",
              "target_entity": "OrderItem",
              "condition": null
            },
            {
              "order": 7,
              "description": "Calculate total amount (sum of unit_price * quantity)",
              "action": "calculate",
              "target_entity": "Order",
              "condition": null
            },
            {
              "order": 8,
              "description": "Mark cart as CHECKED_OUT",
              "action": "update",
              "target_entity": "Cart",
              "condition": null
            }
          ],
          "description": "Customer finalizes purchase. System: validates cart not empty, validates stock for ALL items, deducts stock from products, creates order with status PENDING_PAYMENT, marks cart as CHECKED_OUT, calculates total amount automatically"
        },
        {
          "name": "F14: Pay Order (Simulated)",
          "type": "state_transition",
          "trigger": "Customer pays for order",
          "steps": [
            {
              "order": 1,
              "description": "Validate order exists",
              "action": "validate",
              "target_entity": "Order",
              "condition": "order with given ID exists"
            },
            {
              "order": 2,
              "description": "Validate order status is PENDING_PAYMENT",
              "action": "validate",
              "target_entity": "Order",
              "condition": "order_status = PENDING_PAYMENT"
            },
            {
              "order": 3,
              "description": "Update order status to PAID and payment_status to SIMULATED_OK",
              "action": "update",
              "target_entity": "Order",
              "condition": null
            }
          ],
          "description": "Mark an order as paid. Current status must be PENDING_PAYMENT. Changes to PAID + payment_status to SIMULATED_OK. Only allowed if order is awaiting payment."
        },
        {
          "name": "F15: Cancel Order",
          "type": "state_transition",
          "trigger": "Customer cancels order",
          "steps": [
            {
              "order": 1,
              "description": "Validate order exists",
              "action": "validate",
              "target_entity": "Order",
              "condition": "order with given ID exists"
            },
            {
              "order": 2,
              "description": "Validate order status is PENDING_PAYMENT",
              "action": "validate",
              "target_entity": "Order",
              "condition": "order_status = PENDING_PAYMENT"
            },
            {
              "order": 3,
              "description": "Return stock to products",
              "action": "update",
              "target_entity": "Product",
              "condition": null
            },
            {
              "order": 4,
              "description": "Update order status to CANCELLED",
              "action": "update",
              "target_entity": "Order",
              "condition": null
            }
          ],
          "description": "Cancel an order and return stock. Current status must be PENDING_PAYMENT. Changes to CANCELLED. Adds quantity back to products."
        },
        {
          "name": "F16: List Customer Orders",
          "type": "workflow",
          "trigger": "Customer views their order history",
          "steps": [
            {
              "order": 1,
              "description": "Validate customer exists",
              "action": "validate",
              "target_entity": "Customer",
              "condition": "customer with given ID exists"
            },
            {
              "order": 2,
              "description": "Filter orders by customer and optionally by status",
              "action": "validate",
              "target_entity": "Order",
              "condition": "orders belong to customer, optionally filter by status"
            },
            {
              "order": 3,
              "description": "Return list of orders",
              "action": "validate",
              "target_entity": "Order",
              "condition": null
            }
          ],
          "description": "View all orders for a customer, optionally filtered by status"
        },
        {
          "name": "F17: View Order Details",
          "type": "workflow",
          "trigger": "User requests order details by ID",
          "steps": [
            {
              "order": 1,
              "description": "Validate order exists",
              "action": "validate",
              "target_entity": "Order",
              "condition": "order with given ID exists"
            },
            {
              "order": 2,
              "description": "Return order details with items",
              "action": "validate",
              "target_entity": "Order",
              "condition": null
            }
          ],
          "description": "Obtain all information for an order by ID. Returns 404 if not found."
        }
      ],
      "invariants": [
        {
          "entity": "Cart",
          "description": "Cart requires Customer",
          "expression": null,
          "enforcement_level": "strict"
        },
        {
          "entity": "CartItem",
          "description": "CartItem requires Cart",
          "expression": null,
          "enforcement_level": "strict"
        },
        {
          "entity": "CartItem",
          "description": "CartItem requires Product",
          "expression": null,
          "enforcement_level": "strict"
        },
        {
          "entity": "Order",
          "description": "Order requires Customer",
          "expression": null,
          "enforcement_level": "strict"
        },
        {
          "entity": "OrderItem",
          "description": "OrderItem requires Order",
          "expression": null,
          "enforcement_level": "strict"
        },
        {
          "entity": "OrderItem",
          "description": "OrderItem requires Product",
          "expression": null,
          "enforcement_level": "strict"
        },
        {
          "entity": "F8: Create Cart",
          "description": "F8: Create Cart uses Customer",
          "expression": null,
          "enforcement_level": "strict"
        },
        {
          "entity": "F9: Add Item to Cart",
          "description": "F9: Add Item to Cart uses Cart",
          "expression": null,
          "enforcement_level": "strict"
        },
        {
          "entity": "F9: Add Item to Cart",
          "description": "F9: Add Item to Cart uses Product",
          "expression": null,
          "enforcement_level": "strict"
        },
        {
          "entity": "F9: Add Item to Cart",
          "description": "F9: Add Item to Cart creates CartItem",
          "expression": null,
          "enforcement_level": "strict"
        },
        {
          "entity": "F13: Checkout (Create Order)",
          "description": "F13: Checkout (Create Order) uses Cart",
          "expression": null,
          "enforcement_level": "strict"
        },
        {
          "entity": "F13: Checkout (Create Order)",
          "description": "F13: Checkout (Create Order) creates Order",
          "expression": null,
          "enforcement_level": "strict"
        },
        {
          "entity": "F13: Checkout (Create Order)",
          "description": "F13: Checkout (Create Order) creates OrderItem",
          "expression": null,
          "enforcement_level": "strict"
        },
        {
          "entity": "F13: Checkout (Create Order)",
          "description": "F13: Checkout (Create Order) uses Product",
          "expression": null,
          "enforcement_level": "strict"
        }
      ]
    },
    "validation_model": {
      "rules": [
        {
          "entity": "Product",
          "attribute": "price",
          "type": "range",
          "condition": "> 0",
          "error_message": "Product price must be greater than 0",
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Product",
          "attribute": "stock",
          "type": "range",
          "condition": ">= 0",
          "error_message": "Product stock cannot be negative",
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Product",
          "attribute": "name",
          "type": "presence",
          "condition": "required",
          "error_message": "Product name is required",
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Customer",
          "attribute": "email",
          "type": "format",
          "condition": "valid email",
          "error_message": "Email must be a valid email address",
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Customer",
          "attribute": "email",
          "type": "uniqueness",
          "condition": "unique",
          "error_message": "Email already exists",
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Customer",
          "attribute": "email",
          "type": "presence",
          "condition": "required",
          "error_message": "Email is required",
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Customer",
          "attribute": "full_name",
          "type": "presence",
          "condition": "required",
          "error_message": "Full name is required",
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "CartItem",
          "attribute": "quantity",
          "type": "range",
          "condition": "> 0",
          "error_message": "Cart item quantity must be greater than 0",
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "CartItem",
          "attribute": "unit_price",
          "type": "range",
          "condition": "> 0",
          "error_message": "Cart item unit price must be greater than 0",
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "CartItem",
          "attribute": "product_id",
          "type": "relationship",
          "condition": "product must exist",
          "error_message": "Product does not exist",
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "OrderItem",
          "attribute": "quantity",
          "type": "range",
          "condition": "> 0",
          "error_message": "Order item quantity must be greater than 0",
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "OrderItem",
          "attribute": "unit_price",
          "type": "range",
          "condition": "> 0",
          "error_message": "Order item unit price must be greater than 0",
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Cart",
          "attribute": "status",
          "type": "status_transition",
          "condition": "OPEN -> CHECKED_OUT",
          "error_message": "Invalid cart status transition",
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Order",
          "attribute": "order_status",
          "type": "status_transition",
          "condition": "PENDING_PAYMENT -> PAID or CANCELLED",
          "error_message": "Invalid order status transition",
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Order",
          "attribute": "total_amount",
          "type": "range",
          "condition": ">= 0",
          "error_message": "Order total amount cannot be negative",
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Cart",
          "attribute": "customer_id",
          "type": "custom",
          "condition": "only one OPEN cart per customer",
          "error_message": "Customer already has an open cart",
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "CartItem",
          "attribute": "product_id",
          "type": "custom",
          "condition": "product must be active",
          "error_message": "Cannot add inactive product to cart",
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "CartItem",
          "attribute": "quantity",
          "type": "stock_constraint",
          "condition": "quantity <= product.stock",
          "error_message": "Insufficient stock available",
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "CartItem",
          "attribute": "product_id",
          "type": "custom",
          "condition": "if product already in cart, increase quantity instead of duplicating",
          "error_message": "Product already in cart",
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Order",
          "attribute": "items",
          "type": "workflow_constraint",
          "condition": "cart must not be empty before checkout",
          "error_message": "Cannot checkout with empty cart",
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Order",
          "attribute": "items",
          "type": "stock_constraint",
          "condition": "all items must have sufficient stock before checkout",
          "error_message": "Insufficient stock for one or more items",
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Order",
          "attribute": "order_status",
          "type": "workflow_constraint",
          "condition": "can only pay if status is PENDING_PAYMENT",
          "error_message": "Order is not in pending payment status",
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Order",
          "attribute": "order_status",
          "type": "workflow_constraint",
          "condition": "can only cancel if status is PENDING_PAYMENT",
          "error_message": "Order cannot be cancelled in current status",
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Product",
          "attribute": "id",
          "type": "presence",
          "condition": "required",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Product",
          "attribute": "id",
          "type": "uniqueness",
          "condition": "unique",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Product",
          "attribute": "id",
          "type": "format",
          "condition": "uuid",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Product",
          "attribute": "name",
          "type": "presence",
          "condition": "required",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Product",
          "attribute": "name",
          "type": "format",
          "condition": "length >= 1, length <= 255",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Product",
          "attribute": "description",
          "type": "format",
          "condition": "length <= 2000",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Product",
          "attribute": "price",
          "type": "presence",
          "condition": "required",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Product",
          "attribute": "price",
          "type": "range",
          "condition": ">= 0.01",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Product",
          "attribute": "stock",
          "type": "presence",
          "condition": "required",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Product",
          "attribute": "stock",
          "type": "range",
          "condition": ">= 0",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Product",
          "attribute": "is_active",
          "type": "presence",
          "condition": "required",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Customer",
          "attribute": "id",
          "type": "presence",
          "condition": "required",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Customer",
          "attribute": "id",
          "type": "uniqueness",
          "condition": "unique",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Customer",
          "attribute": "id",
          "type": "format",
          "condition": "uuid",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Customer",
          "attribute": "email",
          "type": "presence",
          "condition": "required",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Customer",
          "attribute": "email",
          "type": "uniqueness",
          "condition": "unique",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Customer",
          "attribute": "email",
          "type": "format",
          "condition": "email",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Customer",
          "attribute": "email",
          "type": "format",
          "condition": "length <= 255",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Customer",
          "attribute": "full_name",
          "type": "presence",
          "condition": "required",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Customer",
          "attribute": "full_name",
          "type": "format",
          "condition": "length >= 1, length <= 255",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Customer",
          "attribute": "registration_date",
          "type": "presence",
          "condition": "required",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Customer",
          "attribute": "registration_date",
          "type": "format",
          "condition": "datetime",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Cart",
          "attribute": "id",
          "type": "presence",
          "condition": "required",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Cart",
          "attribute": "id",
          "type": "uniqueness",
          "condition": "unique",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Cart",
          "attribute": "id",
          "type": "format",
          "condition": "uuid",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Cart",
          "attribute": "customer_id",
          "type": "presence",
          "condition": "required",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Cart",
          "attribute": "customer_id",
          "type": "format",
          "condition": "uuid",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Cart",
          "attribute": "status",
          "type": "presence",
          "condition": "required",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Cart",
          "attribute": "status",
          "type": "status_transition",
          "condition": "one of: OPEN, CHECKED_OUT",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "CartItem",
          "attribute": "id",
          "type": "presence",
          "condition": "required",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "CartItem",
          "attribute": "id",
          "type": "uniqueness",
          "condition": "unique",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "CartItem",
          "attribute": "id",
          "type": "format",
          "condition": "uuid",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "CartItem",
          "attribute": "cart_id",
          "type": "presence",
          "condition": "required",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "CartItem",
          "attribute": "cart_id",
          "type": "format",
          "condition": "uuid",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "CartItem",
          "attribute": "product_id",
          "type": "presence",
          "condition": "required",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "CartItem",
          "attribute": "product_id",
          "type": "format",
          "condition": "uuid",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "CartItem",
          "attribute": "quantity",
          "type": "presence",
          "condition": "required",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "CartItem",
          "attribute": "quantity",
          "type": "range",
          "condition": ">= 1",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "CartItem",
          "attribute": "unit_price",
          "type": "presence",
          "condition": "required",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "CartItem",
          "attribute": "unit_price",
          "type": "range",
          "condition": ">= 0.01",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Order",
          "attribute": "id",
          "type": "presence",
          "condition": "required",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Order",
          "attribute": "id",
          "type": "uniqueness",
          "condition": "unique",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Order",
          "attribute": "id",
          "type": "format",
          "condition": "uuid",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Order",
          "attribute": "customer_id",
          "type": "presence",
          "condition": "required",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Order",
          "attribute": "customer_id",
          "type": "format",
          "condition": "uuid",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Order",
          "attribute": "order_status",
          "type": "presence",
          "condition": "required",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Order",
          "attribute": "order_status",
          "type": "status_transition",
          "condition": "one of: PENDING_PAYMENT, PAID, CANCELLED",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Order",
          "attribute": "payment_status",
          "type": "presence",
          "condition": "required",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Order",
          "attribute": "payment_status",
          "type": "status_transition",
          "condition": "one of: PENDING, SIMULATED_OK, FAILED",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Order",
          "attribute": "total_amount",
          "type": "presence",
          "condition": "required",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Order",
          "attribute": "total_amount",
          "type": "range",
          "condition": ">= 0",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Order",
          "attribute": "created_at",
          "type": "presence",
          "condition": "required",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "Order",
          "attribute": "created_at",
          "type": "format",
          "condition": "datetime",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "OrderItem",
          "attribute": "id",
          "type": "presence",
          "condition": "required",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "OrderItem",
          "attribute": "id",
          "type": "uniqueness",
          "condition": "unique",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "OrderItem",
          "attribute": "id",
          "type": "format",
          "condition": "uuid",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "OrderItem",
          "attribute": "order_id",
          "type": "presence",
          "condition": "required",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "OrderItem",
          "attribute": "order_id",
          "type": "format",
          "condition": "uuid",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "OrderItem",
          "attribute": "product_id",
          "type": "presence",
          "condition": "required",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "OrderItem",
          "attribute": "product_id",
          "type": "format",
          "condition": "uuid",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "OrderItem",
          "attribute": "quantity",
          "type": "presence",
          "condition": "required",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "OrderItem",
          "attribute": "quantity",
          "type": "range",
          "condition": ">= 1",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "OrderItem",
          "attribute": "unit_price",
          "type": "presence",
          "condition": "required",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        },
        {
          "entity": "OrderItem",
          "attribute": "unit_price",
          "type": "range",
          "condition": ">= 0.01",
          "error_message": null,
          "severity": "error",
          "enforcement_type": "description",
          "enforcement": null,
          "enforcement_code": null,
          "applied_at": []
        }
      ],
      "test_cases": []
    },
    "created_at": "2025-11-27T08:41:12.973816",
    "updated_at": "2025-11-27T08:41:12.973818",
    "version": "1.0.0",
    "phase_status": {
      "spec_extraction": "complete"
    }
  }
}